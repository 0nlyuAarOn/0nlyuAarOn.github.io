<!DOCTYPE html>
<html lang="en">

<!-- Head tag (contains Google-Analytics、Baidu-Tongji)-->
<head>
  <!-- Google Analytics -->
  
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-124651948-1"></script>
    <script type="text/javascript">
      window.dataLayer = window.dataLayer || [];

      function gtag() {
        dataLayer.push(arguments);
      }
      gtag('js', new Date());

      gtag('config', 'UA-124651948-1');
    </script>
  

  <!-- Baidu Tongji -->
  

  <!-- Baidu Push -->
  
    <script>
      (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
      })();
    </script>
  

  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>

  <meta name="google-site-verification" content="lxDfCplOZbIzjhG34NuQBgu2gdyRlAtMB4utP5AgEBc"/>
  <meta name="baidu-site-verification" content="PpzM9WxOJU"/>

  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="description" content="0nlyu‘blog"/>
  <meta name="keyword" content="终极目标: 吃, 喝 ,玩, 乐"/>
  <link rel="shortcut icon" href="/img/avatar/A.jpeg"/>

  <!-- Place this tag in your head or just before your close body tag. -->
  <script async="async" defer="defer" src="https://buttons.github.io/buttons.js"></script>

  
    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css"/>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/beantech.min.css"/>

    <!-- Pygments Highlight CSS -->
    <link rel="stylesheet" href="/css/highlight.css"/>
    <link rel="stylesheet" href="/css/widget.css"/>
    <link rel="stylesheet" href="/css/rocket.css"/>
    <link rel="stylesheet" href="/css/signature.css"/>
    <link rel="stylesheet" href="/css/catalog.css"/>
    <link rel="stylesheet" href="/css/livemylife.css"/>

    
      <!-- wave start -->
      <link rel="stylesheet" href="/css/wave.css"/>
      <!-- wave end -->
    

    
      <!-- top start (article top hot config) -->
      <link rel="stylesheet" href="/css/top.css"/>
      <!-- top end -->
    

    
      <!-- ThemeColor start -->
      <link rel="stylesheet" href="/css/scroll.css"/>
      <!-- ThemeColor end -->
    

    
      <!-- viewer start (Picture preview) -->
      <link rel="stylesheet" href="/css/viewer.min.css"/>
      <!-- viewer end -->
    

    
      <!-- Search start -->
      <link rel="stylesheet" href="/css/search.css"/>
      <!-- Search end -->
    

    
      <!-- ThemeColor start -->
      <link rel="stylesheet" href="/css/themecolor.css"/>
      <!-- ThemeColor end -->
    

    

    
      <!-- gitalk start -->
      <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css"> -->
      <link rel="stylesheet" href="/css/gitalk.css"/>
      <!-- gitalk end -->
    
  

  <!-- Custom Fonts -->
  <!-- <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
  <!-- Hux change font-awesome CDN to qiniu -->
  <link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" type="text/css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <!-- Hux Delete, sad but pending in China <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'> <link
  href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/ css'> -->

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]> <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script> <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script> <![endif]-->

  <!-- ga & ba script hoook -->
  <link rel="canonical" href="http://yoursite-url/Blog/HEXO+VPS个人博客搭建/">
  <title>
    
      HEXO+VPS个人博客搭建 - 0nlyuAar0n|di.did.didi.di..
    
  </title>
<meta name="generator" content="Hexo 5.4.0"></head>


<!-- hack iOS CSS :active style -->

	<body ontouchstart="" class="body--light body--light">


		<!-- ThemeColor -->
		
		<!-- ThemeColor -->
<style type="text/css">
  .body--light {
    --light-mode: none;
    --dark-mode: block;
  }
  .body--dark {
    --light-mode: block;
    --dark-mode: none;
  }
  i.mdui-icon.material-icons.light-mode {
    display: var(--light-mode);
  }
  i.mdui-icon.material-icons.dark-mode {
    display: var(--dark-mode);
  }
</style>
<div class="toggle" onclick="document.body.classList.toggle('body--dark')">
  <i class="mdui-icon material-icons light-mode"></i>
  <i class="mdui-icon material-icons dark-mode"></i>
</div>
<script>
  //getCookieValue
  function getCookieValue(a) {
    var b = document.cookie.match('(^|[^;]+)\\s*' + a + '\\s*=\\s*([^;]+)');
    return b
      ? b.pop()
      : '';
  }
  let themeMode = 'light';
  if (getCookieValue('sb-color-mode') && (getCookieValue('sb-color-mode') !== themeMode)) {
    let dbody = document.body.classList;
    themeMode === 'dark' ? dbody.remove('body--dark') : dbody.add('body--dark');
  }

  //setCookieValue
  var toggleBtn = document.querySelector(".toggle");
  toggleBtn.addEventListener("click", function () {
    var e = document.body.classList.contains("body--dark");
    var cookieString = e
      ? "dark"
      : "light";
    var exp = new Date();
    exp.setTime(exp.getTime() + 3 * 24 * 60 * 60 * 1000); //3天过期
    document.cookie = "sb-color-mode=" + cookieString + ";expires=" + exp.toGMTString() + ";path=/";
  });
</script>

		

		<!-- Gitter -->
		

		<!-- Navigation (contains search)-->
		<!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header page-scroll">
      <button type="button" class="navbar-toggle">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">天欲雪，云满湖</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <!-- Known Issue, found by Hux: <nav>'s height woule be hold on by its content. so, when navbar scale out, the <nav> will cover tags. also mask any touch event of tags, unfortunately. -->
    <div id="huxblog_navbar">
      <div class="navbar-collapse">
        <ul class="nav navbar-nav navbar-right">
          <li>
            <a href="/">HOME</a>
          </li>

          
          
          
          
          <li>
            <a href="/about/">
              
              ABOUT
              
              
            </a>
          </li>
          
          
          
          <li>
            <a href="/tags/">
              
              TAGS
              
              
            </a>
          </li>
          
          
          
          <li>
            <a href="/archive/">
              
              ARCHIVES
              
              
            </a>
          </li>
          
          
          
          <li>
            <a href="/categories/">
              
              CATEGORIES
              
              
            </a>
          </li>
          
          

          
          <li>
            <a class="popup-trigger">
              <span class="search-icon"></span>SEARCH</a>
          </li>
          

          <!-- LangSelect -->
          
        </ul>
      </div>
    </div>
    <!-- /.navbar-collapse -->
  </div>
  <!-- /.container -->
</nav>
<!-- progress -->
<div id="progress">
  <div class="line" style="width: 0%;"></div>
</div>

<script>
  // Drop Bootstarp low-performance Navbar Use customize navbar with high-quality material design animation in high-perf jank-free CSS3 implementation
  var $body = document.body;
  var $toggle = document.querySelector('.navbar-toggle');
  var $navbar = document.querySelector('#huxblog_navbar');
  var $collapse = document.querySelector('.navbar-collapse');

  $toggle.addEventListener('click', handleMagic)

  function handleMagic(e) {
    if ($navbar.className.indexOf('in') > 0) {
      // CLOSE
      $navbar.className = " ";
      // wait until animation end.
      setTimeout(function() {
        // prevent frequently toggle
        if ($navbar.className.indexOf('in') < 0) {
          $collapse.style.height = "0px"
        }
      }, 400)
    } else {
      // OPEN
      $collapse.style.height = "auto"
      $navbar.className += " in";
    }
  }
</script>


		<!-- Post Header (contains intro-header、signature、wordcount、busuanzi、waveoverlay) -->
		<!-- Modified by Yu-Hsuan Yen -->
<!-- Post Header -->

  <style type="text/css">
    .body--light {
      /* intro-header */
      --intro-header-background-image-url-home: url('/img/header_img/GoFar.jpg');
      --intro-header-background-image-url-post: url('/img/header_img/blog/Action.jpeg');
      --intro-header-background-image-url-page: url('//img/header_img/blog/Action.jpeg');
    }
    .body--dark {
      --intro-header-background-image-url-home: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2)), url('/img/header_img/GoFar.jpg');
      --intro-header-background-image-url-post: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2)), url('/img/header_img/blog/Action.jpeg');
      --intro-header-background-image-url-page: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2)), url('//img/header_img/blog/Action.jpeg');
    }

    header.intro-header {
       /*post*/
        background-image: var(--intro-header-background-image-url-post);
        /* background-image: url('/img/header_img/blog/Action.jpeg'); */
      
    }

    
      #signature {/*signature*/
        background-image: url('/img/signature/white.png');
      }
    
  </style>





<header class="intro-header">
  <!-- Signature -->
  <div id="signature">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
          
          <div class="post-heading">
            <div class="tags">
              
              <a class="tag" href="/tags/#blog" title="blog">blog</a>
              
            </div>
            <h1>HEXO+VPS个人博客搭建</h1>
            <h2 class="subheading"></h2>
            <span class="meta">
              Posted by 0nlyuAar0n on
              2021-08-09
            </span>


            
            <!-- WordCount start -->
            <div class="blank_box"></div>
            <span class="meta">
              Estimated Reading Time <span class="post-count">37</span> Minutes
            </span>
            <div class="blank_box"></div>
            <span class="meta">
              Words <span class="post-count">8.7k</span> In Total
            </span>
            <div class="blank_box"></div>
            <!-- WordCount end -->
            
            
            <!-- 不蒜子统计 start -->
            <span class="meta" id="busuanzi_container_page_pv">
              Viewed <span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span> Times
            </span>
            <!-- 不蒜子统计 end -->
            


          </div>
          
        </div>
      </div>
    </div>
  </div>

  
  <!-- waveoverlay start -->
  <div class="preview-overlay">
    <svg class="preview-waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
      <defs>
        <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"></path>
      </defs>
      <g class="preview-parallax">
        <use xlink:href="#gentle-wave" x="48" y="0" fill=var(--gentle-wave1)></use>
        <use xlink:href="#gentle-wave" x="48" y="3" fill=var(--gentle-wave2)></use>
        <use xlink:href="#gentle-wave" x="48" y="5" fill=var(--gentle-wave3)></use>
        <use xlink:href="#gentle-wave" x="48" y="7" fill=var(--gentle-wave)></use>
      </g>
    </svg>
  </div>
  <!-- waveoverlay end -->
  

</header>



		<!-- Main Content (Post contains
	Pager、
	tip、
	socialshare、
	gitalk、gitment、disqus-comment、
	Catalog、
	Sidebar、
	Featured-Tags、
	Friends Blog、
	anchorjs、
	) -->
		<!-- Modify by Yu-Hsuan Yen -->
<!-- Post Content -->
<article>
  <div class="container">
    <div class="row">
      <!-- Post Container -->
      <div class="col-lg-8 col-lg-offset-1 col-md-10 col-md-offset-1 post-container">

        <h1>Go！sugsfree之HEXO+VPS使用webhooks方案个人博客搭建</h1>
<h2 id="前言">前言</h2>
<p>经历几天探索，在hexo和wordpress纠结许久，还是选择hexo搭建好。作为一个轻量级博客系统，hexo的体验个人感觉不错，都是静态的，比较安全，最重要是md用的感觉顺手，哈哈。</p>
<p>出于github国内部分线路访问慢的原因，选择Coding，后面在考虑试试默认github线路+备用Coding双层布局。个人不想备案，所以都选着洋货。。。</p>
<h2 id="一、部署方案介绍">一、部署方案介绍</h2>
<p><strong>Hexo 提供了5种部署方案<a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/docs/deployment.html">（点击查看）</a>，但这些部署方案，都有明显的缺点，就是本地需要Hexo环境，无法实现随时随地的更新博客。所以我选择使用Coding仓库的webhook方案实现。将hexo资源放在VPS上，本地只需编写md文件，push到Coding仓库后，再利用webhook向VPS发送请求，VPS收到请求后触发自动部署脚本，最后由脚本生成静态网页，即可上线博客站点。</strong></p>
<h3 id="常见常见方案">常见常见方案</h3>
<ol>
<li>本地编写MarkDown文档→本地Hexo解析成静态页→提交到VPS上的Git和GitHub等多仓库→Nginx对外服务→用户访问</li>
<li>本地编写MarkDown文档→本地Hexo解析成静态页→提交到GitHub→直接用GitHub Page资源→用户访问</li>
<li>本地编写MarkDown文档→自动同步到VPS并安装Hexo服务解析成静态页→Nginx对外服务→用户访问</li>
<li>本地编写MarkDown文档→自动同步到VPS并安装Hexo服务解析成静态页→Hexo server对外服务→用户访问</li>
</ol>
<h3 id="发布流程图：">发布流程图：</h3>
<p>如流程图所示，整个发布系统<img src="/Blog/HEXO+VPS%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/%E5%8D%9A%E5%AE%A2%E4%B8%8A%E7%BA%BF%E6%96%B9%E6%A1%88%202-16284813517371.jpeg" alt="博客上线方案 2">共涉及到 3 个环境，分别为本地（写作）、Git 仓库（托管 md 源文件）、服务器（Web 服务)环境。在服务器环境构建静态文件，因此需要在服务器端安装 Hexo 环境。</p>
<h4 id="一个完整的发布流程包含-3-个部分：">一个完整的发布流程包含 3 个部分：</h4>
<p>如：<br>
流程 ① ：写作流程；<br>
流程 ② ：发布流程；<br>
流程 ③ ：构建流程；</p>
<h5 id="1-写作流程">1. 写作流程</h5>
<p>本地采用MarkDown编辑器，当写作完成后，利用git环境，push到coding仓库对应分支即可。<img src="/Blog/HEXO+VPS%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/1534862658723-16284925192791.png" alt="Alt text"></p>
<p>#####2.  发布流程<br>
利用Git分支管理策略，可以很好进行发布、修改、整合。当需要发布时，可以将对应开发分支 merge 到 master 分支，然后push master分支，最终实现各分支的合并发布，方便快捷。<img src="/Blog/HEXO+VPS%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/1534862671371-16284925231782.png" alt="Alt text"></p>
<p>#####3.  构建流程<br>
这里使用到Coding的 Webhook 机制，简单来说，就是服务器监听着Coding仓库，一旦触发特定事件就执行构建操作，最终实现用户的自动部署、自动测试等，构建脚本见 Webhook 脚本部分。</p>
<p>当流程 ① 和 ② 结束后，Git 仓库都会向服务器发起一次 HTTP 请求。当收到构建请求后，执行构建操作。构建流程图如下：<img src="/Blog/HEXO+VPS%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/1534862701220-16284925266223.png" alt="Alt text"></p>
<p>首先检查当前变更分支，只有为 master 分支时，执行 pull 操作拉取 md 文件更新，然后再执行 hexo g完成静态文件的构建。</p>
<h3 id="操作流程：">操作流程：</h3>
<p>在本地使用Markdown写文章，将.md源文件push到Coding仓库的相应分支，再利用Webhook向VPS发送请求，VPS接收到请求后将相应分支如source分支pull到Hexo的source文件夹，再利用hexo g -d生成静态网页，最终实现自动生成静态文件发布。</p>
<p>##二、环境配置</p>
<blockquote>
<p>服务器环境：<br>
Centos 7<br>
nginx1.14<br>
git  1.8.3.1<br>
node.js 8.11.3</p>
<p>本机环境：<br>
Windows 10<br>
node.js 8.11.3<br>
git 2.18.0</p>
<p>其他：<br>
域名+VPS</p>
</blockquote>
<h2 id="三、本地环境搭建">三、本地环境搭建</h2>
<p>需要安装：git+nodejs</p>
<h3 id="3-1、windows上安装git安装git">3.1、windows上安装git安装git</h3>
<p>从Git官方上获取<a target="_blank" rel="noopener" href="https://git-scm.com/download/win">下载安装程序</a>。然后按默认选项安装即可：<img src="/Blog/HEXO+VPS%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/1534414501959-16284925314324.png" alt="Alt text"></p>
<p>安装完成后，在开始菜单找到&quot;Git&quot; -&gt; &quot;Git Bash &quot;，执行弹出命令行窗既安装成功。<img src="/Blog/HEXO+VPS%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/1534415087539-16284925497375.png" alt="Alt text"><img src="/Blog/HEXO+VPS%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/.%5CHEXO+VPS%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%5C1534415132443.png" alt="Alt text"></p>
<h4 id="安装完成后，使用-git-bash-来设置自己的用户名和-email-信息：">安装完成后，使用 git bash 来设置自己的用户名和 email 信息：</h4>
<pre><code>$ git config --global user.name &quot;Your Name&quot;
$ git config --global user.email &quot;email@example.com&quot;
</code></pre>
<blockquote>
<p>注意：<br>
git config命令的–global参数，用了这个参数，表示你这台机器上所有的Git仓库都会使用这个配置，当然也可以对某个仓库指定不同的用户名和Email地址。</p>
</blockquote>
<h4 id="或者使用GitHub-Desktop，完全可视化，简单。">或者使用GitHub Desktop，完全可视化，简单。</h4>
<h3 id="3-2、windows安装node-js">3.2、windows安装node.js</h3>
<p>从Node.js网站上<a target="_blank" rel="noopener" href="https://nodejs.org/en/download/">下载安装包</a>，一路默认下来就行，记得勾选自动配置Path，省得以后麻烦。</p>
<p>查看是否安装成功，显示版本即可<img src="/Blog/HEXO+VPS%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/1534927102900-162849328728824.png" alt="Alt text"></p>
<h3 id="3-3、windows安装hexo（可选）">3.3、windows安装hexo（可选）</h3>
<p>在dos窗口输入命令操作：</p>
<h4 id="第一步，安装hexo命令行工具，这个工具在服务器端也需要执行安装">第一步，安装hexo命令行工具，这个工具在服务器端也需要执行安装</h4>
<pre><code>npm install hexo-cli -g
</code></pre>
<h4 id="第二步，生成一个本地hexo项目">第二步，生成一个本地hexo项目</h4>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建blog目录，并初始化hexo项目</span></span><br><span class="line">hexo init <span class="keyword">blog </span><span class="comment"># 若需自定义路径，只需替换“blog”为绝对路径即可</span></span><br><span class="line">cd <span class="keyword">blog</span></span><br><span class="line"><span class="keyword"># </span>安装hexo依赖，hexo是基于nodejs开发的，npm是nodejs的包管理工具</span><br><span class="line">npm <span class="keyword">install </span><span class="comment"># npm一般nodejs会自带，可忽略</span></span><br><span class="line"><span class="comment"># 启动本地服务，打开localhost:4000测试是否成功</span></span><br><span class="line">hexo server</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注：<br>
windows用户路径不含中文</p>
</blockquote>
<h4 id="第三步，新建一篇文章">第三步，新建一篇文章</h4>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo <span class="keyword">new</span> <span class="string">&quot;test post &quot;</span></span><br><span class="line"><span class="meta"># 启动本地服务，查看效果</span></span><br><span class="line">hexo <span class="keyword">server</span></span><br></pre></td></tr></table></figure>
<p>启动后访问 <code>http://localhost:4000/</code>，如图：<img src="/Blog/HEXO+VPS%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/1534927706800-16284925656566.png" alt="Alt text"></p>
<p><code>hexo new</code>可以在/source/_posts目录下生成<code>test-post.md</code>这一个文件，.md是markdown文件的扩展名，这样就可以使用自己的工具去编辑markdown，比如马克飞象、sublime Text，个人习惯用typore。</p>
<p>推荐两个个Sublime Text插件，<a target="_blank" rel="noopener" href="https://github.com/SublimeText-Markdown/MarkdownEditing">MarkDownEditing</a>（markdown写作）+<a target="_blank" rel="noopener" href="https://packagecontrol.io/packages/OmniMarkupPreviewer">OmniMarkupPreviewer</a>（用于标记文件的实时预览器/导出器）。</p>
<h2 id="四、提交到远程仓库（第三步后可进行提交）">四、提交到远程仓库（第三步后可进行提交）</h2>
<p>这里得需要一个远程仓库托管代码，<a target="_blank" rel="noopener" href="http://xn--GithubCoding-h86sm1eg4mjmkcqncv2cbzxeeyf.net">可以使用Github或国内的Coding.net</a>。由于Github网速…且对私有项目是收费的，而且我并不愿意别人能访问到自己的部分源文件，所以选择使用Coding。而且，Coding.net服务器在国内，速度也比较理想，上传和访问都比较稳定。。</p>
<p>写作环境提交到coding仓库上，需要配置ssh才能使用ssh地址，也可以选择使用使用https地址，推荐ssh。https每次都需要输入密码，且。<a target="_blank" rel="noopener" href="https://help.github.com/articles/working-with-ssh-key-passphrases/">《Help.GitHub - SSH key passphrases》</a>里也说了用SSH更方便更安全，不需要去输入长长的密码。</p>
<p>Coding的银牌会员（绑定腾讯云账号即可免费获得）可以创建10个私有项目。.</p>
<blockquote>
<p><strong>如果你有兴趣注册Coding账号的话，欢迎使用我的推广链接：<a target="_blank" rel="noopener" href="https://coding.net/register?key=KCBRQW%EF%BC%8C%E6%88%96%E8%80%85%E4%BD%BF%E7%94%A8%E6%88%91%E7%9A%84%E9%82%80%E8%AF%B7%E7%A0%81%EF%BC%9AKCBRQW">https://coding.net/register?key=KCBRQW，或者使用我的邀请码：KCBRQW</a></strong></p>
</blockquote>
<h3 id="4-1-生成SSH私钥及公钥">4.1 生成SSH私钥及公钥</h3>
<p>参考官方教程：<a target="_blank" rel="noopener" href="https://help.coding.net/docs/project/features/ssh.html#pageTitle">https://help.coding.net/docs/project/features/ssh.html#pageTitle</a></p>
<pre><code> ssh-keygen -t rsa -C &quot;email@email.com&quot;# 填自己的邮箱
 # 为了webhooks编写方便，可不用设置密码，默认回车即可。
</code></pre>
<p>如图：<img src="/Blog/HEXO+VPS%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/1547113772804-16284925702947.png" alt="Alt text"></p>
<p>windows下会在<code>C:\Users\用户\.ssh</code>下生成两个文件<code>id_rsa</code>和<code>id_rsa.pub</code>，再将<code>id_rsa.pub</code>的内容复制到coding账户中的“SSH公钥”选项中即可，如图：<img src="/Blog/HEXO+VPS%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/1534929097470-16284925724168.png" alt="Alt text"></p>
<blockquote>
<p>注： 本地与VPS都需要生成及添加到Coding<br>
如果需要通过webhooks实现服务器自动化部署，推荐使用ssh会更方便一些</p>
</blockquote>
<p>使用下面的命令测试是否可以连接上Coding</p>
<pre><code>ssh -T git@git.coding.net
</code></pre>
<p>效果图：<img src="/Blog/HEXO+VPS%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/1547717349762-162849333307125.png" alt="Alt text"></p>
<h3 id="4-2-创建项目为hexo（自定义）">4.2 创建项目为hexo（自定义）</h3>
<p>在coding上新建一个项目名为hexo<img src="/Blog/HEXO+VPS%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/1534929507791-16284925762439.png" alt="Alt text"></p>
<h3 id="4-3-hexo初始化并提交到coding">4.3 hexo初始化并提交到coding</h3>
<p>本地中，在hexo目录初始化本地仓库，并提交到Coding</p>
<figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br><span class="line"><span class="meta">#初始化本地git仓库</span></span><br><span class="line">git remote add origin git@git.coding.net:Gs0nlyu_Star2/hexo.git</span><br><span class="line"><span class="meta">#将本地仓库与账号上的hexo.git仓库关联，让这两个仓库进行远程同步。添加后，远程库的名称叫origin，也是是git默认叫法，也可以修改。</span></span><br><span class="line"></span><br><span class="line">git checkout -b source</span><br><span class="line"><span class="meta">#创建一个本地的source分支</span></span><br><span class="line">git add .</span><br><span class="line"><span class="meta">#增加当前子目录下所有更改过的文件至index</span></span><br><span class="line">git commit -m <span class="string">&#x27;pushing&#x27;</span></span><br><span class="line"><span class="meta">#git commit –m &quot;项目描述&quot;</span></span><br><span class="line">git push origin source</span><br><span class="line"><span class="meta">#输入密码，开始git </span></span><br></pre></td></tr></table></figure>
<p>完成后，返回Coding即可查看到提条的代码了：<img src="/Blog/HEXO+VPS%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/1534929735320-162849257897210.png" alt="Alt text"></p>
<h2 id="五、服务器环境搭建">五、服务器环境搭建</h2>
<p>需要安装：nginx+git+nodejs</p>
<p>也可以采用LNMP/LAMP作为web环境。</p>
<h3 id="5-1、nginx安装：">5.1、nginx安装：</h3>
<p>编译安装请参考本博客中nginx或tengine的安装。</p>
<p>通过 yum方式安装比较麻烦，还需要安装epel依赖库，下面介绍一种最简单的安装方法</p>
<h4 id="5-1-1、获取nginx安装源">5.1.1、获取nginx安装源</h4>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd <span class="regexp">/etc/yum</span>.repos.d/</span><br><span class="line">touch nginx.repo</span><br></pre></td></tr></table></figure>
<p>在 yum.repos.d 文件下新建一个<code>nginx.repo</code>，然后将下面的内容拷贝进去，<code>:x</code>保存退出<br>
<code>vim nginx.repo</code></p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[nginx]name=nginx repobaseurl=http:<span class="regexp">//</span>nginx.org<span class="regexp">/packages/</span>centos<span class="regexp">/$releasever/</span><span class="variable">$basearch</span>/gpgcheck=<span class="number">0</span>enabled=<span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>####5.1.2、 从配置文件安装nginx<br>
执行下面的命令直接从配置文件安装 nginx</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum <span class="keyword">install</span> nginx -y</span><br></pre></td></tr></table></figure>
<h4 id="5-1-3、启动nginx">5.1.3、启动nginx</h4>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">nginx</span></span><br></pre></td></tr></table></figure>
<p>然后打开服务器所在的IP测试nginx是否安装完成。</p>
<blockquote>
<p>附：<br>
安装好后nginx服务器后默认目录是<code>/usr/share/nginx/html</code></p>
</blockquote>
<h3 id="5-2、git-部署">5.2、git 部署</h3>
<p>参考文档：<a target="_blank" rel="noopener" href="https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/00137396287703354d8c6c01c904c7d9ff056ae23da865a000">https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/00137396287703354d8c6c01c904c7d9ff056ae23da865a000</a></p>
<h4 id="设置Git用户名和邮箱">设置Git用户名和邮箱</h4>
<p>安装完成后，在VPS上设置Git用户名和邮箱，这里的配置最好与写作环境的git用户与邮箱一致。</p>
<figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="keyword">config</span> --<span class="keyword">global</span> user<span class="variable">.name</span> <span class="string">&quot;username&quot;</span> git <span class="keyword">config</span> --<span class="keyword">global</span> user<span class="variable">.email</span> <span class="string">&quot;email@email.com&quot;</span></span><br></pre></td></tr></table></figure>
<h3 id="5-3、从远程仓库中获取代码（验证git配置）">5.3、从远程仓库中获取代码（验证git配置）</h3>
<p>这里也需要配置ssh才能使用ssh地址，也可以选择使用使用http地址。但最好与写作环境一致。</p>
<h4 id="生成SSH私钥及公钥">生成SSH私钥及公钥</h4>
<p>同样的VPS也要配置ssh密钥，添加到coding公钥里，才能连接成功，否则会出现<code>Permission denied (publickey).</code>问题</p>
<pre><code> ssh-keygen -t rsa -C &quot;email@email.com&quot;# 填自己的邮箱 # 为了webhooks编写方便，可不用设置密码，默认回车即可。
</code></pre>
<p>如图：3次回车，设置密码为空<img src="/Blog/HEXO+VPS%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/1547716421055-162849258274911.png" alt="Alt text"><img src="/Blog/HEXO+VPS%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/.%5CHEXO+VPS%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%5C1547716976704.png" alt="Alt text"></p>
<p>VPS下最终生成下生成两个文件<code>id_rsa</code>和<code>id_rsa.pub</code>。再使用<code>cat id_rsa.pub</code>命令将<code>id_rsa.pub</code>的内容复制到coding账户中的“SSH公钥”选项中即可，如图：<img src="/Blog/HEXO+VPS%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/1547717144564-162849258444512.png" alt="Alt text"></p>
<pre><code>enter code here
</code></pre>
<p>使用下面的命令测试是否可以连接上Coding</p>
<pre><code>ssh -T git@git.coding.net
</code></pre>
<p>效果图：<img src="/Blog/HEXO+VPS%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/1547717308828-162849335303326.png" alt="Alt text"></p>
<h4 id="创建项目存放目录：">创建项目存放目录：</h4>
<p>项目存放目录，既可做为网站根目录：</p>
<pre><code> mkdir -p /home/www/hexo
</code></pre>
<h4 id="获取代码：">获取代码：</h4>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd <span class="regexp">/home/</span>www<span class="regexp">/hexogit initgit remote add origin git@git.coding.net:Gs0nlyu_Star2/</span>hexo.gitgit pull origin <span class="keyword">source</span></span><br></pre></td></tr></table></figure>
<p>效果图：<img src="/Blog/HEXO+VPS%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/1547717509625-162849258797713.png" alt="Alt text"></p>
<h3 id="5-4、HEXO部署">5.4、HEXO部署</h3>
<h4 id="HEXO介绍">HEXO介绍</h4>
<p>Hexo 是一个快速、简洁且高效的博客框架。Hexo 使用 Markdown（或其他渲染引擎）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。</p>
<h4 id="1-获取node-js">1. 获取node.js</h4>
<p>官方：<br>
<a target="_blank" rel="noopener" href="https://nodejs.org/en/download/">https://nodejs.org/en/download/</a> （稳定版）或 <a target="_blank" rel="noopener" href="https://nodejs.org/en/download/current/">https://nodejs.org/en/download/current/</a> （最新版）</p>
<pre><code>cd /usr/local/src/wget https://nodejs.org/dist/v8.11.3/node-v8.11.3.tar.gz或者wget https://nodejs.org/dist/v10.15.0/node-v10.15.0.tar.gz
</code></pre>
<h4 id="2-解压并重命名">2. 解压并重命名</h4>
<pre><code>tar xzvf node-v8.11.3.tar.gz &amp;&amp; mv node-v8.11.3 node
</code></pre>
<h4 id="3-安装node-js">3. 安装node.js</h4>
<h5 id="1-进入目录">1. 进入目录</h5>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd  <span class="keyword">node</span><span class="title"></span></span><br></pre></td></tr></table></figure>
<p>使用<code>ls -l</code>列出当前文件<img src="/Blog/HEXO+VPS%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/1534164754326-162849259219614.png" alt="Alt text"></p>
<h5 id="2-编译">2. 编译</h5>
<pre><code>./configure --prefix=/data/server/node/8.11.3 &amp;&amp; make &amp;&amp; make install
</code></pre>
<blockquote>
<p>注：<br>
可以使用<code>make clean</code>清理掉make file，重新编译<br>
有可能遇到gcc+ 没有或者需要版本为4.9.4以上。<br>
部分问题如图：<img src="/Blog/HEXO+VPS%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/1548040373230-162849259424615.png" alt="Alt text"></p>
<ol>
<li>遇问题可以使用命令<code>gcc -v(gcc --version) 或 g++ -v(g++ --version)</code>检测</li>
<li>根据结果显示，选择安装或升级版本，具体参考文末<code>&quot;问题解决”</code></li>
</ol>
</blockquote>
<h5 id="3-配置NODE-HOME，进入profile编辑环境变量">3. 配置NODE_HOME，进入profile编辑环境变量</h5>
<p>vim /etc/profile</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#set <span class="keyword">for</span> nodejsexport NODE_HOME=<span class="regexp">/data/</span>server<span class="regexp">/node/</span><span class="number">8.11</span>.<span class="number">3</span>export PATH=$NODE_HOME/bin:$PATH</span><br></pre></td></tr></table></figure>
<h5 id="4-编译-etc-profile使配置生效">4. 编译/etc/profile使配置生效</h5>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">source</span> <span class="regexp">/etc/</span>profile</span><br></pre></td></tr></table></figure>
<h5 id="5-验证是否安装配置成功">5. 验证是否安装配置成功</h5>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="symbol">@host</span> <span class="number">8.11</span><span class="number">.3</span>]<span class="meta"># node -vv8.11.3</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>注：npm模块安装路径<br>
/usr/local/node/8.9.4/lib/node_modules/</p>
</blockquote>
<h3 id="5-5、HEXO-部署">5.5、HEXO 部署</h3>
<h4 id="1-安装hexo模块">1. 安装hexo模块</h4>
<pre><code>cd /home/www/hexonpm install -g hexo-clinpm install
</code></pre>
<h4 id="2-hexo静态编译">2. hexo静态编译</h4>
<pre><code>hexo  g
</code></pre>
<p>这一步会在hexo目录下生成一个public目录，这里面就是编译后的静态文件目录。</p>
<h4 id="3-Hexo常见的命令">3. Hexo常见的命令:</h4>
<p>生成静态文件:</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">hexo g</span></span><br></pre></td></tr></table></figure>
<p>清除缓存文件 (db.json) 和已生成的静态文件 (public)</p>
<pre><code>hexo clean
</code></pre>
<p>生成站点map</p>
<pre><code>npm install hexo-generator-sitemap --savenpm install hexo-generator-baidu-sitemap --save
</code></pre>
<blockquote>
<p>相关连接<br>
具体hexo命令参考：<br>
<a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/docs/commands">https://hexo.io/zh-cn/docs/commands</a><br>
具体heox配置参考：<br>
<a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/docs/configuration">https://hexo.io/zh-cn/docs/configuration</a></p>
</blockquote>
<h3 id="5-6、配置nginx">5.6、配置nginx</h3>
<h4 id="1-新建hexo-conf">1. 新建hexo.conf</h4>
<p>配置nginx，让80端口指向博客静态页面首页，在 nginx 配置<code>conf.d</code>文件目录中新建一个<code>hexo.conf</code>文件</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd <span class="regexp">/etc/</span>nginx<span class="regexp">/conf.d/</span>vi hexo.conf</span><br></pre></td></tr></table></figure>
<h4 id="2-写入内容：">2. 写入内容：</h4>
<p>在hexo.conf中写入相应的配置并保存，注意细节，不要少分号。</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">server</span> &#123;    <span class="keyword">listen</span>          <span class="number">80</span>;  # 监听端口    server_name     sugsfree.com www.sugsfree.com;  # 你的域名    <span class="keyword">location</span> / &#123;        root        ~/hexo;        <span class="keyword">index</span>        <span class="keyword">index</span>.html;    &#125;&#125;</span><br></pre></td></tr></table></figure>
<p>####3.  重启nginx<br>
重启 nginx 使服务生效</p>
<pre><code>nginx -s reload
</code></pre>
<p>重启后就可以通过https://www.sugsfree.com访问hexo了。</p>
<blockquote>
<p>这里可能出现的问题：</p>
<ol>
<li>404 或者 403 报错</li>
<li>访问页面是一片空白</li>
<li>CSS样式问题<br>
解决参考“问题解决”</li>
</ol>
</blockquote>
<h2 id="六、Git-WebHooks-自动化部署">六、Git WebHooks 自动化部署</h2>
<p>每次本地更新博客，push到coding上，还要上VPS在git pull，这是一件很麻烦的故事，我需要一个webhooks方案，在coding有push操作时能自动更新并部署博客。</p>
<p><strong>可参考官方webhook文档：</strong><br>
<a target="_blank" rel="noopener" href="https://open.coding.net/webhooks/">https://open.coding.net/webhooks/</a></p>
<h3 id="6-1、那么WebHooks是什么？">6.1、那么WebHooks是什么？</h3>
<p>WebHooks就是在你本地执行git push的时候，<br>
远程仓库(coding)会检测到仓库的变化，并发送一个请求到我们配置好的WebHooks（既钩子）。<img src="/Blog/HEXO+VPS%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/1534934468783-162849260091616.png" alt="Alt text"></p>
<blockquote>
<p>实现WebHooks自动化部署的推荐条件：</p>
</blockquote>
<ol>
<li>服务器端配置ssh认证</li>
<li>服务器端配置node.js服务，接受Coding发来的请求。</li>
</ol>
<p>实现自动化部署只需要在本地将.md源文件push到Coding仓库的source分支，后续的操作将利用Coding的Webhook功能和VPS端的js脚本来自动完成。</p>
<h3 id="6-2、远程仓库配置WebHooks">6.2、远程仓库配置WebHooks</h3>
<p>输入url：<a target="_blank" rel="noopener" href="http://www.sugsfree.com:9292/webhooks/push/167349">http://www.sugsfree.com:9292/webhooks/push/167349</a><img src="/Blog/HEXO+VPS%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/1534935675694-162849260330417.png" alt="Alt text"><br>
Coding WebHooks 配置界面</p>
<p>这张图的配置的意思是：当仓库发生push的时候，会发送一个请求到http://www.sugsfree.com:9292/webhooks/…</p>
<p>为了服务端的简易处理，这里没有使用token，而是将url地址当做token，167349就充当了token的角色。这里的端口以及后缀可以自行修改。<strong>如果存在CDN则需要将主机地址改为IP地址，否则连接不上</strong></p>
<p>远程仓库配置完后，就需要考虑服务器如何接收这个请求并重新部署hexo了。</p>
<h2 id="七、VPS上部署响应WebHooks的服务">七、VPS上部署响应WebHooks的服务</h2>
<p>我使用的是nodejs语言去响应。</p>
<p>在VPS上传同步source文件夹</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cd</span> path/<span class="keyword">to</span>/Blog/<span class="keyword">source</span> git init git remote <span class="built_in">add</span> origin git@git.coding.ne<span class="variable">t:Gs0nlyu_Star2</span>/sugsfree.git git checkout -<span class="keyword">b</span> <span class="keyword">source</span> git <span class="built_in">add</span> -A git commit -<span class="keyword">m</span> <span class="string">&quot;Source Upload&quot;</span> git push origin <span class="keyword">source</span></span><br></pre></td></tr></table></figure>
<h3 id="7-1-新建webhooks-js文件">7.1 新建<code>webhooks.js</code>文件</h3>
<p>在本地hexo目录中新建一个webhooks.js文件，<code>vim webhooks.js</code>内容如下：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var flag = 0var http = <span class="keyword">require</span>(<span class="string">&#x27;http&#x27;</span>)var <span class="keyword">exec</span> = <span class="keyword">require</span>(<span class="string">&#x27;child_process&#x27;</span>).exechttp.createServer(function (req, res) &#123;    <span class="regexp">//</span> 该路径与WebHooks中的路径部分需要完全匹配，实现简易的授权认证。    <span class="keyword">if</span>(req.url === <span class="string">&#x27;/webhooks/push/167349&#x27;</span>)&#123;        <span class="keyword">if</span>(flag == <span class="number">0</span>) &#123;        <span class="regexp">//</span> 如果url匹配并且运行过程没有产生其他变化，表示认证通过，则执行 sh ./deploy.sh            <span class="keyword">exec</span>(<span class="string">&#x27;sh ./deploy.sh&#x27;</span>)            flag = <span class="number">1</span>            //flag值为<span class="number">1</span>，表示成功        &#125;        <span class="keyword">else</span> &#123;            flag = <span class="number">0</span>            //flag值为<span class="number">0</span>，表示失败        &#125;    &#125;    res.end()&#125;).listen(<span class="number">9292</span>)</span><br></pre></td></tr></table></figure>
<p>代码意义：<br>
启动一个nodejs服务，监听4002端口。当请求过来的url完全匹配的时候，<a target="_blank" rel="noopener" href="http://xn--deploy-vh7lp71w.sh">执行deploy.sh</a>。</p>
<h3 id="7-2-新建deploy-sh脚本">7.2 新建deploy.sh脚本</h3>
<p>再新建一个文件deploy.sh处理部署相关脚本，内容如下：</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd <span class="regexp">/home/</span>www<span class="regexp">/hexo/</span>sourcegit reset --hardgit pull origin mastercd <span class="regexp">/home/</span>www<span class="regexp">/hexo/</span>hexo cleanhexo g</span><br></pre></td></tr></table></figure>
<p>增加执行权限：</p>
<pre><code> chmod  +x deploy.sh
</code></pre>
<h3 id="7-3-push新建文件到服务器上">7.3 push新建文件到服务器上</h3>
<p>将新增的webhooks.js与deploy.sh两个文件push到服务器。<br>
然后在服务器中启动nodejs服务监听webhooks，服务器会自动更新部署博客</p>
<pre><code>node ./webhooks.js
</code></pre>
<h3 id="7-4-启动进程守护">7.4 启动进程守护</h3>
<p>要将进程加入守护，可以通过 pm2 来实现</p>
<pre><code>npm install pm2 --global
</code></pre>
<h3 id="7-5-pm2启动webhooks-js-将脚本运行在后台">7.5 pm2启动webhooks.js,将脚本运行在后台</h3>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pm2 start <span class="regexp">/home/</span>www<span class="regexp">/hexo/</span>webhooks.js </span><br></pre></td></tr></table></figure>
<h3 id="7-6-加入开机自启">7.6 加入开机自启</h3>
<p>如果服务器重启，我们还要手动开启webhooks服务，所以我们将上面的命令加入开机启动就可以了，将命令加入/etc/rc.d/rc.local中，即可实现开机自启</p>
<h5 id="将命令写到脚本-home-www-hexo-webhooks-js中：">将命令写到脚本<code>/home/www/hexo/webhooks.js</code>中：</h5>
<pre><code>/sbin/runuser -l root -c &quot;/usr/bin/pm2 start /home/www/hexo/webhooks.js&quot;
</code></pre>
<h5 id="在-etc-rc-d-rc-local中添加刚才的脚本：">在<code>/etc/rc.d/rc.local</code>中添加刚才的脚本：</h5>
<pre><code>/data/www/sugsfree/webhooks.js 2&gt;&amp;1 &gt; /dev/null &amp;
</code></pre>
<h5 id="查看启动状态">查看启动状态</h5>
<p>重启VPS，然后用命令<code>pm2 show webhooks</code>查看 webhooks 是否已经启动。<img src="/Blog/HEXO+VPS%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/1535974768025-162849260979718.png" alt="Alt text"></p>
<h2 id="八、在本地同步soucre文件夹">八、在本地同步soucre文件夹</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">//创建 path/to/<span class="built_in">source</span> git init git remote add origin git@git.coding.net:Gs0nlyu_Star2/sugsfree.git git checkout -b <span class="built_in">source</span> //或者使用//git add -A//git commit -m <span class="string">&quot;Source Upload&quot;</span> git pull origin <span class="built_in">source</span>//git push origin <span class="built_in">source</span> -f，强行让本地分支覆盖远程分支。。。</span><br></pre></td></tr></table></figure>
<p>这样一来，以后只需要在本地将.md源文件push到Coding仓库的source分支，就可以实现自动部署了。</p>
<p>##九、全站HTTPS<br>
因为http是明文传输，通过http协议传输的内容很容易查看，为了安全，所以选用了https，既“HTTP over SSL/TLS”超文本传输安全协议。</p>
<p>要部署https就要需要一张被信任的CA（ Certificate Authority ）也就是证书授权中心颁发的 SSL 安全证书，并且将它部署到你的网站服务器上。部署上，用户访问页面时网址前就会有把受浏览器信任的小绿锁。</p>
<p>遵从免费、高可用性等等原则，选择Let’s Encrypt免费证书进行部署。</p>
<blockquote>
<p>Let’s Encrypt是第一个免费并且开源的CA,且已经获得Mozilla、微软等主要浏览器厂商的根授信，是免费SSL证书中首选，wzfou.com用的SSL就是这家。目前已经推出了免费泛域名证书，</p>
</blockquote>
<blockquote>
<p>注：<br>
<strong>使用 Let’s Encrypt 的免费证书，每三个月要续签一次。</strong></p>
</blockquote>
<p>接下来，就记录一下，具体的实施步骤：</p>
<h3 id="第一步、安装Certbot">第一步、安装Certbot</h3>
<p>安装可以通过 Certbot 的傻瓜式操作</p>
<blockquote>
<p>Certbot 是 ISRG 的发起者 EFF （电子前哨基金会）为 Let’s Encrypt 项目发布了一个官方的客户端，利用它可以完全自动化的获取、部署和更新安全证书。</p>
<p>Certbot 的官方网站是 <a target="_blank" rel="noopener" href="https://certbot.eff.org/">https://certbot.eff.org/</a> ，进入官方后就可以选择自己的web服务器和系统，并且EFF 官方会给出详细的使用方法，当然也可以参考本文章方法快速部署的。</p>
</blockquote>
<p>在CentOS7上安装Certbot有三种方式：</p>
<ol>
<li>使用Certbot官方提供的对应平台的RPM包安装</li>
<li>使用Certbot官方的提供的certbot-auto安装</li>
<li>使用pip安装Certbot，因为Certbot是Python程序</li>
</ol>
<p>安装Certbot客户端</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https:<span class="regexp">//</span>dl.eff.org/certbot-auto</span><br></pre></td></tr></table></figure>
<h3 id="第二步、赋权">第二步、赋权</h3>
<p>赋权可执行</p>
<pre><code> chmod a+x certbot-auto
</code></pre>
<h3 id="第三步、执行脚本">第三步、执行脚本</h3>
<p>执行客户端即可获取证书，Cerbot会自动对nginx进行配置。</p>
<pre><code>sudo ./certbot-auto --nginx
</code></pre>
<p>执行后开始安装证书，中间需要我们输入邮箱，域名等等，按照步骤操作就可疑了，最后顺利申请到证书。</p>
<h3 id="第四步、自动更新Let’s-Encrypt证书">第四步、自动更新Let’s Encrypt证书</h3>
<p>Let’s Encrypt证书的有效期为三个月，所以Let’s Encrypt证书到期时，要使用Certbot更新证书，Certbot推荐使用Cron或者Systemd Timer每天运行两次更新证书命令，当证书不到期时，不会更新证书，当证书到期后，会自动更新证书。</p>
<h4 id="1）定义Systemd服务certbot-service：">1）定义Systemd服务certbot.service：</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /usr/lib/systemd/system/certbot.service</span><br></pre></td></tr></table></figure>
<p>内容如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[Unit]Description=Let<span class="string">&#x27;s Encrypt renewal[Service]Type=oneshotExecStart=/usr/bin/certbot renew --quiet --agree-tos</span></span><br></pre></td></tr></table></figure>
<p>ExecStart：要指向你系统中certbot命令，因为你可能使用其他方式安装。</p>
<p>2）定义Systemd Timer：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /usr/lib/systemd/system/certbot.timer</span><br></pre></td></tr></table></figure>
<p>内容如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[Unit]Description=Twice daily renewal of Let<span class="string">&#x27;s Encrypt&#x27;</span>s certificates[Timer]OnCalendar=0/12:00:00RandomizedDelaySec=1hPersistent=<span class="literal">true</span>[Install]WantedBy=timers.target</span><br></pre></td></tr></table></figure>
<p>3）使Timer开机自动运行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl <span class="built_in">enable</span> certbot.timer</span><br></pre></td></tr></table></figure>
<p>4）启动Timer</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl start certbot.timer</span><br></pre></td></tr></table></figure>
<p>这样系统当Timer定时运行对应的certbot.service服务。</p>
<h1>问题解决：</h1>
<p>webhook+https 没检查完整<br>
图片显示不了the requested content cannot be loaded. Please try again later</p>
<h2 id="一、Centos7-安装gcc-5-2">一、Centos7 安装gcc-5.2</h2>
<p>yum源： 阿里云源</p>
<h3 id="问题一：">问题一：</h3>
<p>node安装时WARNING: warnings were emitted in the configure phase<br>
提示信息：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">WARNING: C++ compiler too old, need g++ 4.9.4 or clang++ 3.4.2 (CXX=g++)creating icu_config.gypi</span><br></pre></td></tr></table></figure>
<p>或者：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">WARNING: failed to autodetect C++ compiler version (CXX=g++)WARNING: failed to autodetect C compiler version (CC=gcc)Node.js configure error: No acceptable C compiler found!        Please make sure you have a C compiler installed on your system and/or        consider adjusting the CC environment variable <span class="keyword">if</span> you installed        it <span class="keyword">in</span> a non-standard prefix.        Makefile:102: *** Missing or stale config.gypi, please run ./configure.  Stop.</span><br></pre></td></tr></table></figure>
<h3 id="解决：">解决：</h3>
<p>安装并升级gcc++ 至4.9.4及以上。<br>
（gcc和g++都是GNU(组织)的一个编译器。不愿折腾的建议安装4.9）<br>
参考文档：</p>
<ol>
<li>gcc和g++的区别 (很详细的描述)<br>
<a target="_blank" rel="noopener" href="https://my.oschina.net/alphajay/blog/3989">https://my.oschina.net/alphajay/blog/3989</a></li>
</ol>
<h3 id="1-获取文件：">1. 获取文件：</h3>
<p>打开 <a target="_blank" rel="noopener" href="https://ftp.gnu.org/gnu/gcc/">https://ftp.gnu.org/gnu/gcc/</a> 选择一个版本，这里我们选择最新版本 8.2.0：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/src    wget -c https://ftp.gnu.org/gnu/gcc/gcc-8.2.0/gcc-8.2.0.tar.gz</span><br></pre></td></tr></table></figure>
<h3 id="2-安装基本编译环境">2. 安装基本编译环境</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum groupinstall <span class="string">&quot;Development Tools&quot;</span>yum install -y glibc-devel bison flex texinfo build-essential   <span class="comment">##glibc-static，libstdc++-static（这两个是必要的开发环境）</span></span><br></pre></td></tr></table></figure>
<h3 id="3-解压并检测依赖脚本">3. 解压并检测依赖脚本</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf gcc-8.2.0.tar.gzcd gcc-8.2.0./contrib/download_prerequisites</span><br></pre></td></tr></table></figure>
<p>根据提示自动下载依赖，注意提示失败的版本号<br>
<img src="/Blog/HEXO+VPS%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/1534586771396-162849261753219-162849301941622.png" alt="Alt text"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//检测依赖脚本并自动安装如果不成功可以手动下载依赖</span><br><span class="line">yum install gmp-devel                             </span><br><span class="line">yum install mpfr-devel                          </span><br><span class="line">yum install libmpc-devel                       </span><br></pre></td></tr></table></figure>
<blockquote>
<p>当然以上库可以在ftp://gcc.gnu.org/pub/gcc/infrastructure/下载</p>
</blockquote>
<h3 id="4-编译生成config文件">4. 编译生成config文件</h3>
<h4 id="生成编译文件：">生成编译文件：</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir gcc-build-8.2.0cd gcc-build-8.2.0/<span class="built_in">cd</span> .../configure --enable-checking=release --enable-languages=c,c++ --disable-multilib （仅编译64-bit的编译器）</span><br></pre></td></tr></table></figure>
<h3 id="5-执行编译，生成-Makefile-文件。">5. 执行编译，生成 Makefile 文件。</h3>
<p>这个过程很久，大概花了我一个小时。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make -j4(-j4选项是make对多核处理器的优化，如果不成功请使用 make，相关优化选项可以移步至参考文献[2]。建议不要使用make -j来编译，虽然可以缩短编译时间，但极大可能会编译失败)	    make install </span><br></pre></td></tr></table></figure>
<blockquote>
<p>可以用命令<code>echo $?</code>查看是否正确（回显为0既正确，其他皆有错）</p>
</blockquote>
<h3 id="6-重启，查看gcc版本：">6 重启，查看gcc版本：</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc -v</span><br></pre></td></tr></table></figure>
<p>如图：<img src="/Blog/HEXO+VPS%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/1534235116024-162849262393920-162849304698923.png" alt="Alt text"></p>
<h3 id="5-验证特性：">5.  验证特性：</h3>
<p>尝试写一个C++11特性的程序段 <a target="_blank" rel="noopener" href="http://tryCpp11.cc">tryCpp11.cc</a>，使用了shared_ptr</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">//tryCpp11.cc<span class="comment">#include &lt;iostream&gt;#include &lt;memory&gt;int main()&#123;     std::shared_ptr&lt;int&gt; pInt(new int(5));     std::cout &lt;&lt; *pInt &lt;&lt; std::endl;    return 0;&#125;</span></span><br></pre></td></tr></table></figure>
<p>验证文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">g++ -std=c++11 -o tryCpp11 tryCpp11.ccchmod 755 text.cc./tryCpp11</span><br></pre></td></tr></table></figure>
<p>##二、 安装中问题解决：</p>
<h3 id="问题现象二：">问题现象二：</h3>
<p>使用<code>make</code>编译时出现错误如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make[3]: Entering directory `/home/ec2-user/gcc-7.2.0/build/gcc<span class="string">&#x27;build/genattrtab ../../gcc/common.md ../../gcc/config/i386/i386.md insn-conditions.md \        -Atmp-attrtab.c -Dtmp-dfatab.c -Ltmp-latencytab.cmake[3]: *** [s-attrtab] Killedmake[3]: Leaving directory `/home/ec2-user/gcc-7.2.0/build/gcc&#x27;</span>make[2]: *** [all-stage1-gcc] Error 2make[2]: Leaving directory `/home/ec2-user/gcc-7.2.0/build<span class="string">&#x27;make[1]: *** [stage1-bubble] Error 2make[1]: Leaving directory `/home/ec2-user/gcc-7.2.0/build&#x27;</span>make: *** [all] Error 2</span><br></pre></td></tr></table></figure>
<h3 id="原因：">原因：</h3>
<p>使用的是较小的内存实例，例如nano或micro实例，则由于内存不足，编译可能会过早结束。会出现以上错误。</p>
<h3 id="解决：-2">解决：</h3>
<ol>
<li>在这种情况下，建议使用以下命令保护大约600 MB的交换区域。</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SWAP=/tmp/swap dd <span class="keyword">if</span>=/dev/zero of=<span class="variable">$SWAP</span> bs=1M count=600 mkswap <span class="variable">$SWAP</span> sudo swapon <span class="variable">$SWAP</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>先看看config.log</li>
</ol>
<figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">g</span> ++<span class="comment">：无法识别的选项&#x27;</span><span class="literal">-</span><span class="comment">static</span><span class="literal">-</span><span class="comment">libstdc</span> ++<span class="comment">&#x27;</span> </span><br><span class="line"><span class="comment">conftest</span><span class="string">.</span><span class="comment">cpp：11：2：错误：#error</span> <span class="literal">-</span><span class="comment">static</span><span class="literal">-</span><span class="comment">libstdc</span> ++<span class="comment">未实现</span></span><br></pre></td></tr></table></figure>
<p>怎么了？：<a target="_blank" rel="noopener" href="https://gcc.gnu.org/wiki/FAQ#configure">https://gcc.gnu.org/wiki/FAQ#configure</a><br>
解决方案：https：<a target="_blank" rel="noopener" href="//gcc.gnu.org/ml/gcc-help/2014-08/msg00064.html">//gcc.gnu.org/ml/gcc-help/2014-08/msg00064.html</a></p>
<p>解决方法：<br>
删除gcc源目录并再次提取新的源，重新构造安装即可</p>
<h2 id="二、-解决node安装，源码编译升级安装了gcc，出现类似’GLIBCXX-3-4-21’-not-found">二、 解决node安装，源码编译升级安装了gcc，出现类似’GLIBCXX_3.4.21’ not found</h2>
<p>编译安装node出现 GLIBCXX 版本错误：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/<span class="built_in">local</span>/src/node-v8.9.4/out/Release/mksnapshot: /usr/lib64/libstdc++.so.6: version `GLIBCXX_3.4.20<span class="string">&#x27; not found (required by /usr/local/src/node-v8.9.4/out/Release/mksnapshot)/usr/local/src/node-v8.9.4/out/Release/mksnapshot: /usr/lib64/libstdc++.so.6: version `GLIBCXX_3.4.21&#x27;</span> not found (required by /usr/<span class="built_in">local</span>/src/node-v8.9.4/out/Release/mksnapshot)make[1]: *** [/usr/<span class="built_in">local</span>/src/node-v8.9.4/out/Release/obj.target/v8_snapshot/geni/snapshot.cc] Error 1rm 7680655c26d9eea5b14de312f31ce30a749c41e0.intermediatemake[1]: Leaving directory `/usr/<span class="built_in">local</span>/src/node-v8.9.4/out<span class="string">&#x27;make: *** [node] Error 2</span></span><br></pre></td></tr></table></figure>
<h3 id="原因猜想：">原因猜想：</h3>
<p>为了安装最新版本的Node.js（最新版本的Node.js使用了C++ 11中，而C++ 11需要code&gt;gcc 4.8+才能支持），将gcc升级到了当前最新版本v 8.2.0。</p>
<p>源码编译升级安装了gcc后，编译程序或运行其它程序时，有时会出现类似/usr/lib64/libstdc++.so.6: version `GLIBCXX_3.4.21’ not found的问题。这是因为升级gcc时，生成的动态库没有替换老版本gcc的动态库导致的，将gcc最新版本的动态库替换系统中老版本的动态库即可解决。</p>
<h4 id="解决方法：">解决方法：</h4>
<p>在上一个问题中升级 gcc 生成的动态库并没有替换老版本的动态库，我们需要去手动替换一下。升级后，成功编译安装了新版本的Node.js（v 4.2.1）,但运行时程序时出现了以下错误：</p>
<h5 id="1-查看-GLIBCXX-版本：">1. 查看 GLIBCXX 版本：</h5>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@host gcc-build-8.2.0]<span class="comment"># strings /usr/lib64/libstdc++.so.6 | grep GLIBCXXGLIBCXX_3.4GLIBCXX_3.4.1GLIBCXX_3.4.2GLIBCXX_3.4.3GLIBCXX_3.4.4GLIBCXX_3.4.5GLIBCXX_3.4.6GLIBCXX_3.4.7GLIBCXX_3.4.8GLIBCXX_3.4.9GLIBCXX_3.4.10GLIBCXX_3.4.11GLIBCXX_3.4.12GLIBCXX_3.4.13GLIBCXX_3.4.14GLIBCXX_3.4.15GLIBCXX_3.4.16GLIBCXX_3.4.17GLIBCXX_3.4.18GLIBCXX_3.4.19GLIBCXX_DEBUG_MESSAGE_LENGTH</span></span><br></pre></td></tr></table></figure>
<p>并没有 GLIBCXX_3.4.21和GLIBCXX_3.4.20</p>
<h5 id="2-执行以下命令，查找编译-gcc-时生成的最新动态库：">2. 执行以下命令，查找编译 gcc 时生成的最新动态库：</h5>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -name <span class="string">&quot;libstdc++.so*&quot;</span></span><br></pre></td></tr></table></figure>
<h5 id="3-查询结果：">3.查询结果：</h5>
<p>如图：<img src="/Blog/HEXO+VPS%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/1534767779018-162849264815321.png" alt="Alt text"></p>
<h5 id="4-将上面的最新动态库-libstdc-so-6-0-24-，-复制到-usr-lib64-目录下：">4. 将上面的最新动态库 libstdc++.so.6.0.24  ， 复制到 /usr/lib64 目录下：</h5>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp /usr/<span class="built_in">local</span>/src/gcc-8.2.0/gcc-build-8.2.0/stage1-x86_64-pc-linux-gnu/libstdc++-v3/src/.libs/libstdc++.so.6.0.25  /usr/lib64</span><br></pre></td></tr></table></figure>
<h5 id="5-切换工作目录至-usr-lib64，删除原来的软链接，-将默认库的软链接指向最新动态库：">5. 切换工作目录至 /usr/lib64，删除原来的软链接， 将默认库的软链接指向最新动态库：</h5>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/lib64rm -rf libstdc++.so.6ln -s libstdc++.so.6.0.25 libstdc++.so.6</span><br></pre></td></tr></table></figure>
<h5 id="5-重新查询：">5. 重新查询：</h5>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@host node-v8.9.4]<span class="comment"># strings /usr/lib64/libstdc++.so.6 | grep GLIBCXXGLIBCXX_3.4GLIBCXX_3.4.1GLIBCXX_3.4.2GLIBCXX_3.4.3GLIBCXX_3.4.4GLIBCXX_3.4.5GLIBCXX_3.4.6GLIBCXX_3.4.7GLIBCXX_3.4.8GLIBCXX_3.4.9GLIBCXX_3.4.10GLIBCXX_3.4.11GLIBCXX_3.4.12GLIBCXX_3.4.13GLIBCXX_3.4.14GLIBCXX_3.4.15GLIBCXX_3.4.16GLIBCXX_3.4.17GLIBCXX_3.4.18GLIBCXX_3.4.19GLIBCXX_3.4.20GLIBCXX_3.4.21</span></span><br></pre></td></tr></table></figure>
<h5 id="搞定，收工-那node咋办？？回头继续重新编译。">搞定，收工~~那node咋办？？回头继续重新编译。</h5>
<p>参考文档：<br>
解决类似 /usr/lib64/libstdc++.so.6: version `GLIBCXX_3.4.21’ not found 的问题<br>
<a target="_blank" rel="noopener" href="https://itbilu.com/linux/management/NymXRUieg.html">https://itbilu.com/linux/management/NymXRUieg.html</a></p>
<h2 id="三、-hexo-d-时SSH端口错误">三、 hexo d 时SSH端口错误</h2>
<h3 id="问题：">问题：</h3>
<p>服务器默认SSH端口改变</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh: connect to host www.sugsfree.com port 22: Connection refusedfatal: Could not <span class="built_in">read</span> from remote repository.Please make sure you have the correct access rightsand the repository exists.FATAL Something<span class="string">&#x27;s wrong. Maybe you can find the solution here: http://hexo.io/docs/troubleshooting.htmlError: ssh: connect to host www.sugsfree.com port 22: Connection refused</span></span><br></pre></td></tr></table></figure>
<h3 id="解决方法：-2">解决方法：</h3>
<p>主要是改Hexo的配置_config.yml和主题目录下的_config.yml，修改repository 的配置</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Deployment## Docs: https://hexo.io/docs/deployment.html##如果出于安全或其它原因考虑，你修改了 SSH 默认的端口，那么上面 repository 的配置要做如下修改：##repo: ssh://yourusername@server:&lt;yourport&gt;/~/hexo.git##示例deploy:  type: git  repo:    github:  https://github.com/GitHubusername/example.github.io.git  #同步到GitHub    vps:  ssh://git@example.com:22231/~/hexo.git  #同步到自己的VPS  branch: master  message: Hexo update</span></span><br></pre></td></tr></table></figure>
<h2 id="四、HEXO访问页面问题：">四、HEXO访问页面问题：</h2>
<h3 id="1-404-或者403报错。">1. 404 或者403报错。</h3>
<p>因为 nginx 是以 nginx 用户运行的， 而nginx没有博客目录的读写权限，有两个方法可以解决：</p>
<ol>
<li>给博客目录赋权，让 nginx 用户拥有读写权限</li>
<li>让 nginx 以 root 用户运行</li>
</ol>
<p>为了安全起见，选择了第一种：</p>
<h4 id="更换博客目录所属用户">更换博客目录所属用户</h4>
<p>修改nginx的bash，使其不能登录系统<br>
vim /etc/passwd</p>
<blockquote>
<p>更换目录所属用户为nginx用户，并赋权读写。<br>
chown nginx:nginx /home/www/hexo<br>
chmod 644 /home/www/hexo</p>
</blockquote>
<h4 id="更改nginx-conf配置文件">更改nginx.conf配置文件</h4>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim <span class="regexp">/etc/</span>nginx/nginx.conf</span><br></pre></td></tr></table></figure>
<p>将<code>user nobody;</code> 改成 <code>user nginx;</code> 即可。然后重启 nginx。</p>
<h3 id="2-访问页面是一片空白">2. 访问页面是一片空白</h3>
<p>解决：<br>
之前用到的主题并没有上传到 远程仓库Coding上，将主题拷贝到 themes 文件夹下，然后部署 hexo 就可以正常访问了。</p>
<h3 id="3-CSS样式问题">3.CSS样式问题</h3>
<p>因为博客路径错误，这会导致 CSS 和图像等资源的路径解析错误。</p>
<p>解决方案一：更改 Hexo 的_config.yml 中的 url 参数为相应新路径。</p>
<p>解决方案二：更改 Coding 代码仓库的存放博客的路径。</p>
<h4 id="参考文档：">参考文档：</h4>
<p>hexo生成的静态页本地打开css引用不到?<br>
<a target="_blank" rel="noopener" href="https://segmentfault.com/q/1010000005676078">https://segmentfault.com/q/1010000005676078</a></p>
<h2 id="五、Hexo之解决-FATAL-Cannot-read-property-‘code’-of-undefined">五、Hexo之解决 FATAL Cannot read property ‘code’ of undefined</h2>
<p>运行 hexo g 出现了 ERROR，</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FATAL Cannot <span class="keyword">read</span> <span class="keyword">property</span><span class="title"> </span>&#x27;code&#x27; of undefined</span><br></pre></td></tr></table></figure>
<p>出现上述Error着实让人头疼，不管新建post.md还是其他更改，均无法完成 hexo g -d （即生成和推送）。</p>
<p>尝试了很多更改，终于奏效了一个，在此备忘并分享，步骤如下：</p>
<h3 id="打开Hexo根目录下的-package-json-文件，">打开Hexo根目录下的 package.json 文件，</h3>
<p>将其内容更改如下：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&#123;</span></span><br><span class="line">  &quot;name&quot;: &quot;hexo-site&quot;,</span><br><span class="line">  &quot;version&quot;: &quot;0.0.0&quot;,</span><br><span class="line">  &quot;private&quot;: true,</span><br><span class="line">  &quot;hexo&quot;: &#123;</span><br><span class="line">    &quot;version&quot;: &quot;&quot;   // 此处右边的引号内原本有个 3.2.0，删除即可，不要填新的内容，重新运行后系统会自动填充这个引号内的数据。</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;dependencies&quot;: &#123;</span><br><span class="line">    &quot;hexo&quot;: &quot;^3.2.0&quot;,</span><br><span class="line">    &quot;hexo-deployer-git&quot;: &quot;^0.2.0&quot;,</span><br><span class="line">    &quot;hexo-deployer-heroku&quot;: &quot;^0.1.1&quot;,</span><br><span class="line">    &quot;hexo-deployer-openshift&quot;: &quot;^0.1.1&quot;,</span><br><span class="line">    &quot;hexo-deployer-rsync&quot;: &quot;^0.1.2&quot;,</span><br><span class="line">    &quot;hexo-generator-archive&quot;: &quot;^0.1.4&quot;,</span><br><span class="line">    &quot;hexo-generator-category&quot;: &quot;^0.1.3&quot;,</span><br><span class="line">    &quot;hexo-generator-feed&quot;: &quot;^1.2.0&quot;,</span><br><span class="line">    &quot;hexo-generator-index&quot;: &quot;^0.2.0&quot;,</span><br><span class="line">    &quot;hexo-generator-search&quot;: &quot;^1.0.4&quot;,</span><br><span class="line">    &quot;hexo-generator-sitemap&quot;: &quot;^1.1.2&quot;,</span><br><span class="line">    &quot;hexo-generator-tag&quot;: &quot;^0.2.0&quot;,</span><br><span class="line">    &quot;hexo-renderer-ejs&quot;: &quot;^0.2.0&quot;,</span><br><span class="line">    &quot;hexo-renderer-marked&quot;: &quot;^0.2.11&quot;,</span><br><span class="line">    &quot;hexo-renderer-stylus&quot;: &quot;^0.2.3&quot;,</span><br><span class="line">    &quot;hexo-server&quot;: &quot;^0.2.0&quot;,</span><br><span class="line">    &quot;hexo-wordcount&quot;: &quot;^2.0.1&quot;,</span><br><span class="line">    &quot;hexo-toc&quot;: &quot;^1.0.8&quot;,</span><br><span class="line">    &quot;hexo-url-image&quot;: &quot;^0.1.0&quot;,</span><br><span class="line">    &quot;hexo-encrypt&quot;: &quot;^0.2.0&quot;,</span><br><span class="line">    &quot;hexo-blog-encrypt&quot;: &quot;1.1.*&quot;    // 最后一行文本需要注意，此处末尾原本有个多余的 逗号，已删除</span><br><span class="line">  &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>以上更改完成后，即可恢复 hexo g -d 正常运行啦。</p>
<h2 id="六、HEXO-卸载：">六、HEXO 卸载：</h2>
<p>单个项目直接删掉文件夹<br>
删除系统：<br>
3.0.0版本执行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall hexo-cli -g</span><br></pre></td></tr></table></figure>
<p>之前版本执行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall hexo -g</span><br></pre></td></tr></table></figure>
<h2 id="七、git问题：">七、git问题：</h2>
<h3 id="8-1-GitHub常见操作和常见错误-fatal-remote-origin-already-exists-fatal-Couldn’t-find-remote-ref-master">8.1  GitHub常见操作和常见错误(fatal:remote origin already exists)(fatal: Couldn’t find remote ref master)</h3>
<p>原文地址：<a target="_blank" rel="noopener" href="http://blog.csdn.net/dengjianqiang2011/article/details/9260435">http://blog.csdn.net/dengjianqiang2011/article/details/9260435</a></p>
<h3 id="8-2-git-pull-error-The-following-untracked-working-tree-files-would-be-overwritten-by-merge">8.2  git pull error: The following untracked working tree files would be overwritten by merge</h3>
<p>参考地址：<br>
<a target="_blank" rel="noopener" href="https://github.com/avast-tl/retdec/issues/92">https://github.com/avast-tl/retdec/issues/92</a></p>
<h3 id="8-3-解决Git中fatal-refusing-to-merge-unrelated-histories">8.3 解决Git中fatal: refusing to merge unrelated histories</h3>
<p>Git的报错<br>
在使用Git的过程中有时会出现一些问题，那么在解决了每个问题的时候，都需要去总结记录下来，下次不再犯。</p>
<p>一、fatal: refusing to merge unrelated histories<br>
今天在使用Git创建项目的时候，在两个分支合并的时候，出现了下面的这个错误。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~/SpringSpace/newframe on  master ⌚ 11:35:56$ git merge origin/druidfatal: refusing to merge unrelated histories</span><br></pre></td></tr></table></figure>
<p>这里的问题的关键在于：fatal: refusing to merge unrelated histories<br>
你可能会在<code>git pull</code>或者<code>git push</code>中都有可能会遇到，这是因为两个分支没有取得关系。那么怎么解决呢？</p>
<p>二、解决方案<br>
在你操作命令后面加<code>--allow-unrelated-histories</code><br>
例如： <code>git merge master --allow-unrelated-histories</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~/SpringSpace/newframe on  druid ⌚ 11:36:49$ git merge master --allow-unrelated-historiesAuto-merging .gitignoreCONFLICT (add/add): Merge conflict <span class="keyword">in</span> .gitignoreAutomatic merge failed; fix conflicts and <span class="keyword">then</span> commit the result.</span><br></pre></td></tr></table></figure>
<p>如果你是git pull或者git push报fatal: refusing to merge unrelated histories<br>
同理：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git pull origin master --allow-unrelated-histories </span><br></pre></td></tr></table></figure>
<h3 id="8-4-解决冲突：">8.4 解决冲突：</h3>
<h4 id="问题现象，分支冲突问题：">问题现象，分支冲突问题：</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Automatic merge failed; fix conflicts and <span class="keyword">then</span> commit the result.</span><br></pre></td></tr></table></figure>
<h4 id="解决">解决:</h4>
<p>参考文献：<br>
<a target="_blank" rel="noopener" href="https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/001375840202368c74be33fbd884e71b570f2cc3c0d1dcf000">https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/001375840202368c74be33fbd884e71b570f2cc3c0d1dcf000</a></p>
<h3 id="8-5-Git-代码冲突常见解决方法">8.5 Git:代码冲突常见解决方法</h3>
<p>如果系统中有一些配置文件在服务器上做了配置修改,然后后续开发又新添加一些配置项的时候,</p>
<p>在发布这个配置文件的时候,会发生代码冲突:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">error: Your <span class="built_in">local</span> changes to the following files would be overwritten by merge:        <span class="built_in">source</span>/_posts/木马病毒入侵手工排查之XorDDos/木马病毒入侵手工排查之XorDDos.mdPlease commit your changes or stash them before you merge.AbortingUpdating de75003..d80f779</span><br></pre></td></tr></table></figure>
<p>如果希望保留生产服务器上所做的改动,仅仅并入新配置项, 处理方法如下:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stashgit pullgit stash pop</span><br></pre></td></tr></table></figure>
<p>然后可以使用git diff -w +文件名 来确认代码自动合并的情况.</p>
<p>反过来,如果希望用代码库中的文件完全覆盖本地工作版本. 方法如下:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hardgit pull</span><br></pre></td></tr></table></figure>
<p>其中git reset是针对版本,如果想针对文件回退本地修改,使用</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout HEAD file/to/restore</span><br></pre></td></tr></table></figure>
<h3 id="8-6-设置了-SSH-KEY还需要密码登录">8.6 设置了 SSH KEY还需要密码登录</h3>
<p>修改_config.yml，将部署方式从https方式修改为ssh方式。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/deployment.html</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="attr">repository:</span> <span class="string">https://github.com/youname/youname.git</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure>
<p>修改为</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/deployment.html</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="attr">repository:</span> <span class="string">git@github.com:youname/youname.github.git</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure>
<h3 id="8-7-fatal-unable-to-access-‘https-github-xxxxxxxxx的解决方法">8.7 fatal: unable to access ‘<a target="_blank" rel="noopener" href="https://github">https://github</a> xxxxxxxxx的解决方法</h3>
<p>问题重现：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$  npm install  https://github.com/CodeFalling/hexo-asset-image --save</span><br><span class="line">npm ERR! code 128</span><br><span class="line">npm ERR! Command failed: git <span class="built_in">clone</span> --mirror -q https://github.com/CodeFalling/hexo-asset-image.git C:.ache\tmp\git-clone-5ca9b688\.git --config core.longpaths=<span class="literal">true</span></span><br><span class="line"></span><br><span class="line">npm ERR! fatal: unable to access <span class="string">&#x27;https://github.com/CodeFalling/hexo-asset-image.git/&#x27;</span>: OpenSSL SSL_read: Connection was reset, errno 10054</span><br><span class="line">npm ERR!</span><br><span class="line"></span><br><span class="line">npm ERR! A complete <span class="built_in">log</span> of this run can be found <span class="keyword">in</span>:</span><br></pre></td></tr></table></figure>
<p>解决方法：</p>
<p>将命令中的 https改为 git</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install git://github.com/CodeFalling/hexo-asset-image --save</span><br></pre></td></tr></table></figure>
<h1>参考文献：</h1>
<ol>
<li>Centos7升级gcc学习笔记[2]<br>
<a target="_blank" rel="noopener" href="http://www.cnblogs.com/highway-9/p/5628852.html">http://www.cnblogs.com/highway-9/p/5628852.html</a></li>
<li>gcc升级后更新libstdc++.so.6动态库https://blog.csdn.net/na_beginning/article/details/53413997</li>
<li>如何配置 SSH 公钥访问代码仓库<br>
<a target="_blank" rel="noopener" href="https://coding.net/help/doc/account/ssh-key.html">https://coding.net/help/doc/account/ssh-key.html</a></li>
<li>Hexo配置说明：<br>
<a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/docs/configuration.html">https://hexo.io/zh-cn/docs/configuration.html</a></li>
<li>Node.js 安装笔记<br>
<a target="_blank" rel="noopener" href="https://note.leodev.me/2018/03/30/nodejs-installation-notes/">https://note.leodev.me/2018/03/30/nodejs-installation-notes/</a></li>
<li>Hexo 博客 travis-ci 自动部署到VPS<br>
<a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000005687985">https://segmentfault.com/a/1190000005687985</a></li>
<li>如何在服务器上搭建hexo博客https://segmentfault.com/a/1190000009363890#articleHeader0</li>
<li>关于hexo主题next博客加载空白页的处理<br>
<a target="_blank" rel="noopener" href="https://123sunxiaolin.github.io/2016/11/12/%E5%85%B3%E4%BA%8Ehexo%E4%B8%BB%E9%A2%98next%E5%8D%9A%E5%AE%A2%E5%8A%A0%E8%BD%BD%E7%A9%BA%E7%99%BD%E9%A1%B5%E7%9A%84%E5%A4%84%E7%90%86/">https://123sunxiaolin.github.io/2016/11/12/关于hexo主题next博客加载空白页的处理/</a></li>
<li>启用Hexo开源博客系统<br>
<a target="_blank" rel="noopener" href="https://www.fanhaobai.com/2017/03/install-hexo.html#%E5%AE%98%E6%96%B9%E6%8E%A8%E8%8D%90">https://www.fanhaobai.com/2017/03/install-hexo.html#官方推荐</a></li>
<li>快速搭建Hexo博客+webhook自动部署+全站HTTPS<br>
<a target="_blank" rel="noopener" href="http://www.gaoshilei.com/2017/10/30/hexo-init/">http://www.gaoshilei.com/2017/10/30/hexo-init/</a></li>
<li>基于Hexo的matery主题搭建博客并深度优化<br>
<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/cf9730925b5c">https://www.jianshu.com/p/cf9730925b5c</a></li>
</ol>


        <hr>
        <!-- Pager -->
        <ul class="pager">
          
          <li class="previous">
            <a href="/Blog/Typore+hexo图片同步/" data-toggle="tooltip" data-placement="top" title="Typore+hexo图片同步">&larr; Previous Post</a>
          </li>
          
          
          <li class="next">
            <a href="/Go/Go介绍/" data-toggle="tooltip" data-placement="top" title="Go介绍">Next Post &rarr;</a>
          </li>
          
        </ul>

        
        <!-- tip start -->
        <!-- tip -->
<!-- tip start -->
<div class="tip">
  <p>
    
      If you like this blog or find it useful for you, you are welcome to comment on it. You are also welcome to share this blog, so that more people can participate in it. If the images used in the blog infringe your copyright, please contact the author to delete them. Thank you !
    
  </p>
</div>
<!-- tip end -->

        <!-- tip end -->
        

        
        <!-- Sharing Srtart -->
        <!-- Social Social Share Post -->
<!-- Docs:https://github.com/overtrue/share.js -->

<div class="social-share" data-initialized="true" data-disabled="tencent ,douban ,qzone ,linkedin ,facebook ,google ,diandian" data-wechat-qrcode-helper="" align="center">
  <ul class="list-inline text-center social-share-ul">
    <li class="social-share-li">
      <a target="_blank" class="social-share-icon icon-twitter">
        <i class="fa fa-twitter fa-1x" aria-hidden="true"></i>
      </a>
    </li>
    <li class="social-share-li">
      <a class="social-share-icon icon-wechat">
        <i class="fa fa-weixin fa-1x" aria-hidden="true"></i>
      </a>
    </li>
    <li class="social-share-li">
      <a target="_blank" class="social-share-icon icon-weibo">
        <i class="fa fa-weibo fa-1x" aria-hidden="true"></i>
      </a>
    </li>
    <li class="social-share-li">
      <a target="_blank" class="social-share-icon icon-qq">
        <i class="fa fa-qq fa-1x" aria-hidden="true"></i>
      </a>
    </li>
    <li class="social-share-li">
      <a target="_blank" class="social-share-icon" href="mailto:?subject=HEXO+VPS个人博客搭建&body=Hi,I found this website and thought you might like it http://yoursite-url/Blog/HEXO+VPS个人博客搭建/">
        <i class="fa fa-envelope fa-1x" aria-hidden="true"></i>
      </a>
    </li>
  </ul>
</div>

<!-- css & js -->
<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css"> -->
<script defer="defer" async="true" src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>

        <!-- Sharing End -->
        
        <hr>

        <!-- comments start -->
        <!-- 1. gitalk comment -->

  <!-- gitalk start -->
  <!-- Docs:https://github.com/gitalk/gitalk/blob/master/readme-cn.md -->

  <div id="gitalk-container"></div>

  
    <!-- <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.js"></script> -->
    <script src="/js/comment/gitalk.js"></script>
  

  <script>
    var gitalk = new Gitalk({
      clientID: '6daf597fa0a20b7d167d',
      clientSecret: 'd7815897cdef77f24783de4c4023612fd330929d',
      repo: 'https://github.com/0nlyuAarOn/BloG_gitalk.git',
      owner: '0nlyuAar0n',
      admin: '[&#39;0nlyu&#39;]',
      id: 'Mon Aug 09 2021 10:21:42 GMT+0800', // Ensure uniqueness and length less than 50
      distractionFreeMode: false, // Facebook-like distraction free mode
      perPage: 10,
      pagerDirection: 'last',
      createIssueManually: false,
      language: 'en',
      proxy: 'https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token'
    });
    gitalk.render('gitalk-container');

    var gtFolded = () => {
      setTimeout(function () {
        let markdownBody = document.getElementsByClassName("markdown-body");
        let list = Array.from(markdownBody);
        list.forEach(item => {
          if (item.clientHeight > 250) {
            item.classList.add('gt-comment-body-folded');
            item.style.maxHeight = '250px';
            item.title = 'Click to Expand';
            item.onclick = function () {
              item.classList.remove('gt-comment-body-folded');
              item.style.maxHeight = '';
              item.title = '';
              item.onclick = null;
            };
          }
        })
      }, 800);
    }
  </script>

  <!-- gitalk end -->


<!-- 2. gitment comment -->


<!-- 3. disqus comment -->


        <!-- comments end -->
        <hr>

      </div>

      <!-- Catalog: Tabe of Content -->
      <!-- Table of Contents -->

    
      <aside id="sidebar">
        <div id="toc" class="toc-article">
        <strong class="toc-title">Contents</strong>
        
          <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">Go！sugsfree之HEXO+VPS使用webhooks方案个人博客搭建</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-nav-number">1.1.</span> <span class="toc-nav-text">前言</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E4%B8%80%E3%80%81%E9%83%A8%E7%BD%B2%E6%96%B9%E6%A1%88%E4%BB%8B%E7%BB%8D"><span class="toc-nav-number">1.2.</span> <span class="toc-nav-text">一、部署方案介绍</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E5%B8%B8%E8%A7%81%E5%B8%B8%E8%A7%81%E6%96%B9%E6%A1%88"><span class="toc-nav-number">1.2.1.</span> <span class="toc-nav-text">常见常见方案</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E5%8F%91%E5%B8%83%E6%B5%81%E7%A8%8B%E5%9B%BE%EF%BC%9A"><span class="toc-nav-number">1.2.2.</span> <span class="toc-nav-text">发布流程图：</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E4%B8%80%E4%B8%AA%E5%AE%8C%E6%95%B4%E7%9A%84%E5%8F%91%E5%B8%83%E6%B5%81%E7%A8%8B%E5%8C%85%E5%90%AB-3-%E4%B8%AA%E9%83%A8%E5%88%86%EF%BC%9A"><span class="toc-nav-number">1.2.2.1.</span> <span class="toc-nav-text">一个完整的发布流程包含 3 个部分：</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#1-%E5%86%99%E4%BD%9C%E6%B5%81%E7%A8%8B"><span class="toc-nav-number">1.2.2.1.1.</span> <span class="toc-nav-text">1. 写作流程</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E6%93%8D%E4%BD%9C%E6%B5%81%E7%A8%8B%EF%BC%9A"><span class="toc-nav-number">1.2.3.</span> <span class="toc-nav-text">操作流程：</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E4%B8%89%E3%80%81%E6%9C%AC%E5%9C%B0%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="toc-nav-number">1.3.</span> <span class="toc-nav-text">三、本地环境搭建</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#3-1%E3%80%81windows%E4%B8%8A%E5%AE%89%E8%A3%85git%E5%AE%89%E8%A3%85git"><span class="toc-nav-number">1.3.1.</span> <span class="toc-nav-text">3.1、windows上安装git安装git</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E5%AE%89%E8%A3%85%E5%AE%8C%E6%88%90%E5%90%8E%EF%BC%8C%E4%BD%BF%E7%94%A8-git-bash-%E6%9D%A5%E8%AE%BE%E7%BD%AE%E8%87%AA%E5%B7%B1%E7%9A%84%E7%94%A8%E6%88%B7%E5%90%8D%E5%92%8C-email-%E4%BF%A1%E6%81%AF%EF%BC%9A"><span class="toc-nav-number">1.3.1.1.</span> <span class="toc-nav-text">安装完成后，使用 git bash 来设置自己的用户名和 email 信息：</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E6%88%96%E8%80%85%E4%BD%BF%E7%94%A8GitHub-Desktop%EF%BC%8C%E5%AE%8C%E5%85%A8%E5%8F%AF%E8%A7%86%E5%8C%96%EF%BC%8C%E7%AE%80%E5%8D%95%E3%80%82"><span class="toc-nav-number">1.3.1.2.</span> <span class="toc-nav-text">或者使用GitHub Desktop，完全可视化，简单。</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#3-2%E3%80%81windows%E5%AE%89%E8%A3%85node-js"><span class="toc-nav-number">1.3.2.</span> <span class="toc-nav-text">3.2、windows安装node.js</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#3-3%E3%80%81windows%E5%AE%89%E8%A3%85hexo%EF%BC%88%E5%8F%AF%E9%80%89%EF%BC%89"><span class="toc-nav-number">1.3.3.</span> <span class="toc-nav-text">3.3、windows安装hexo（可选）</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E7%AC%AC%E4%B8%80%E6%AD%A5%EF%BC%8C%E5%AE%89%E8%A3%85hexo%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7%EF%BC%8C%E8%BF%99%E4%B8%AA%E5%B7%A5%E5%85%B7%E5%9C%A8%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E4%B9%9F%E9%9C%80%E8%A6%81%E6%89%A7%E8%A1%8C%E5%AE%89%E8%A3%85"><span class="toc-nav-number">1.3.3.1.</span> <span class="toc-nav-text">第一步，安装hexo命令行工具，这个工具在服务器端也需要执行安装</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E7%AC%AC%E4%BA%8C%E6%AD%A5%EF%BC%8C%E7%94%9F%E6%88%90%E4%B8%80%E4%B8%AA%E6%9C%AC%E5%9C%B0hexo%E9%A1%B9%E7%9B%AE"><span class="toc-nav-number">1.3.3.2.</span> <span class="toc-nav-text">第二步，生成一个本地hexo项目</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E7%AC%AC%E4%B8%89%E6%AD%A5%EF%BC%8C%E6%96%B0%E5%BB%BA%E4%B8%80%E7%AF%87%E6%96%87%E7%AB%A0"><span class="toc-nav-number">1.3.3.3.</span> <span class="toc-nav-text">第三步，新建一篇文章</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E5%9B%9B%E3%80%81%E6%8F%90%E4%BA%A4%E5%88%B0%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%EF%BC%88%E7%AC%AC%E4%B8%89%E6%AD%A5%E5%90%8E%E5%8F%AF%E8%BF%9B%E8%A1%8C%E6%8F%90%E4%BA%A4%EF%BC%89"><span class="toc-nav-number">1.4.</span> <span class="toc-nav-text">四、提交到远程仓库（第三步后可进行提交）</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#4-1-%E7%94%9F%E6%88%90SSH%E7%A7%81%E9%92%A5%E5%8F%8A%E5%85%AC%E9%92%A5"><span class="toc-nav-number">1.4.1.</span> <span class="toc-nav-text">4.1 生成SSH私钥及公钥</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#4-2-%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE%E4%B8%BAhexo%EF%BC%88%E8%87%AA%E5%AE%9A%E4%B9%89%EF%BC%89"><span class="toc-nav-number">1.4.2.</span> <span class="toc-nav-text">4.2 创建项目为hexo（自定义）</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#4-3-hexo%E5%88%9D%E5%A7%8B%E5%8C%96%E5%B9%B6%E6%8F%90%E4%BA%A4%E5%88%B0coding"><span class="toc-nav-number">1.4.3.</span> <span class="toc-nav-text">4.3 hexo初始化并提交到coding</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E4%BA%94%E3%80%81%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="toc-nav-number">1.5.</span> <span class="toc-nav-text">五、服务器环境搭建</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#5-1%E3%80%81nginx%E5%AE%89%E8%A3%85%EF%BC%9A"><span class="toc-nav-number">1.5.1.</span> <span class="toc-nav-text">5.1、nginx安装：</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#5-1-1%E3%80%81%E8%8E%B7%E5%8F%96nginx%E5%AE%89%E8%A3%85%E6%BA%90"><span class="toc-nav-number">1.5.1.1.</span> <span class="toc-nav-text">5.1.1、获取nginx安装源</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#5-1-3%E3%80%81%E5%90%AF%E5%8A%A8nginx"><span class="toc-nav-number">1.5.1.2.</span> <span class="toc-nav-text">5.1.3、启动nginx</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#5-2%E3%80%81git-%E9%83%A8%E7%BD%B2"><span class="toc-nav-number">1.5.2.</span> <span class="toc-nav-text">5.2、git 部署</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E8%AE%BE%E7%BD%AEGit%E7%94%A8%E6%88%B7%E5%90%8D%E5%92%8C%E9%82%AE%E7%AE%B1"><span class="toc-nav-number">1.5.2.1.</span> <span class="toc-nav-text">设置Git用户名和邮箱</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#5-3%E3%80%81%E4%BB%8E%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E4%B8%AD%E8%8E%B7%E5%8F%96%E4%BB%A3%E7%A0%81%EF%BC%88%E9%AA%8C%E8%AF%81git%E9%85%8D%E7%BD%AE%EF%BC%89"><span class="toc-nav-number">1.5.3.</span> <span class="toc-nav-text">5.3、从远程仓库中获取代码（验证git配置）</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E7%94%9F%E6%88%90SSH%E7%A7%81%E9%92%A5%E5%8F%8A%E5%85%AC%E9%92%A5"><span class="toc-nav-number">1.5.3.1.</span> <span class="toc-nav-text">生成SSH私钥及公钥</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE%E5%AD%98%E6%94%BE%E7%9B%AE%E5%BD%95%EF%BC%9A"><span class="toc-nav-number">1.5.3.2.</span> <span class="toc-nav-text">创建项目存放目录：</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E8%8E%B7%E5%8F%96%E4%BB%A3%E7%A0%81%EF%BC%9A"><span class="toc-nav-number">1.5.3.3.</span> <span class="toc-nav-text">获取代码：</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#5-4%E3%80%81HEXO%E9%83%A8%E7%BD%B2"><span class="toc-nav-number">1.5.4.</span> <span class="toc-nav-text">5.4、HEXO部署</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#HEXO%E4%BB%8B%E7%BB%8D"><span class="toc-nav-number">1.5.4.1.</span> <span class="toc-nav-text">HEXO介绍</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#1-%E8%8E%B7%E5%8F%96node-js"><span class="toc-nav-number">1.5.4.2.</span> <span class="toc-nav-text">1. 获取node.js</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#2-%E8%A7%A3%E5%8E%8B%E5%B9%B6%E9%87%8D%E5%91%BD%E5%90%8D"><span class="toc-nav-number">1.5.4.3.</span> <span class="toc-nav-text">2. 解压并重命名</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#3-%E5%AE%89%E8%A3%85node-js"><span class="toc-nav-number">1.5.4.4.</span> <span class="toc-nav-text">3. 安装node.js</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#1-%E8%BF%9B%E5%85%A5%E7%9B%AE%E5%BD%95"><span class="toc-nav-number">1.5.4.4.1.</span> <span class="toc-nav-text">1. 进入目录</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#2-%E7%BC%96%E8%AF%91"><span class="toc-nav-number">1.5.4.4.2.</span> <span class="toc-nav-text">2. 编译</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#3-%E9%85%8D%E7%BD%AENODE-HOME%EF%BC%8C%E8%BF%9B%E5%85%A5profile%E7%BC%96%E8%BE%91%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-nav-number">1.5.4.4.3.</span> <span class="toc-nav-text">3. 配置NODE_HOME，进入profile编辑环境变量</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#4-%E7%BC%96%E8%AF%91-etc-profile%E4%BD%BF%E9%85%8D%E7%BD%AE%E7%94%9F%E6%95%88"><span class="toc-nav-number">1.5.4.4.4.</span> <span class="toc-nav-text">4. 编译&#x2F;etc&#x2F;profile使配置生效</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#5-%E9%AA%8C%E8%AF%81%E6%98%AF%E5%90%A6%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE%E6%88%90%E5%8A%9F"><span class="toc-nav-number">1.5.4.4.5.</span> <span class="toc-nav-text">5. 验证是否安装配置成功</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#5-5%E3%80%81HEXO-%E9%83%A8%E7%BD%B2"><span class="toc-nav-number">1.5.5.</span> <span class="toc-nav-text">5.5、HEXO 部署</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#1-%E5%AE%89%E8%A3%85hexo%E6%A8%A1%E5%9D%97"><span class="toc-nav-number">1.5.5.1.</span> <span class="toc-nav-text">1. 安装hexo模块</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#2-hexo%E9%9D%99%E6%80%81%E7%BC%96%E8%AF%91"><span class="toc-nav-number">1.5.5.2.</span> <span class="toc-nav-text">2. hexo静态编译</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#3-Hexo%E5%B8%B8%E8%A7%81%E7%9A%84%E5%91%BD%E4%BB%A4"><span class="toc-nav-number">1.5.5.3.</span> <span class="toc-nav-text">3. Hexo常见的命令:</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#5-6%E3%80%81%E9%85%8D%E7%BD%AEnginx"><span class="toc-nav-number">1.5.6.</span> <span class="toc-nav-text">5.6、配置nginx</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#1-%E6%96%B0%E5%BB%BAhexo-conf"><span class="toc-nav-number">1.5.6.1.</span> <span class="toc-nav-text">1. 新建hexo.conf</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#2-%E5%86%99%E5%85%A5%E5%86%85%E5%AE%B9%EF%BC%9A"><span class="toc-nav-number">1.5.6.2.</span> <span class="toc-nav-text">2. 写入内容：</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E5%85%AD%E3%80%81Git-WebHooks-%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2"><span class="toc-nav-number">1.6.</span> <span class="toc-nav-text">六、Git WebHooks 自动化部署</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#6-1%E3%80%81%E9%82%A3%E4%B9%88WebHooks%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-nav-number">1.6.1.</span> <span class="toc-nav-text">6.1、那么WebHooks是什么？</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#6-2%E3%80%81%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E9%85%8D%E7%BD%AEWebHooks"><span class="toc-nav-number">1.6.2.</span> <span class="toc-nav-text">6.2、远程仓库配置WebHooks</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E4%B8%83%E3%80%81VPS%E4%B8%8A%E9%83%A8%E7%BD%B2%E5%93%8D%E5%BA%94WebHooks%E7%9A%84%E6%9C%8D%E5%8A%A1"><span class="toc-nav-number">1.7.</span> <span class="toc-nav-text">七、VPS上部署响应WebHooks的服务</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#7-1-%E6%96%B0%E5%BB%BAwebhooks-js%E6%96%87%E4%BB%B6"><span class="toc-nav-number">1.7.1.</span> <span class="toc-nav-text">7.1 新建webhooks.js文件</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#7-2-%E6%96%B0%E5%BB%BAdeploy-sh%E8%84%9A%E6%9C%AC"><span class="toc-nav-number">1.7.2.</span> <span class="toc-nav-text">7.2 新建deploy.sh脚本</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#7-3-push%E6%96%B0%E5%BB%BA%E6%96%87%E4%BB%B6%E5%88%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A"><span class="toc-nav-number">1.7.3.</span> <span class="toc-nav-text">7.3 push新建文件到服务器上</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#7-4-%E5%90%AF%E5%8A%A8%E8%BF%9B%E7%A8%8B%E5%AE%88%E6%8A%A4"><span class="toc-nav-number">1.7.4.</span> <span class="toc-nav-text">7.4 启动进程守护</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#7-5-pm2%E5%90%AF%E5%8A%A8webhooks-js-%E5%B0%86%E8%84%9A%E6%9C%AC%E8%BF%90%E8%A1%8C%E5%9C%A8%E5%90%8E%E5%8F%B0"><span class="toc-nav-number">1.7.5.</span> <span class="toc-nav-text">7.5 pm2启动webhooks.js,将脚本运行在后台</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#7-6-%E5%8A%A0%E5%85%A5%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF"><span class="toc-nav-number">1.7.6.</span> <span class="toc-nav-text">7.6 加入开机自启</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#%E5%B0%86%E5%91%BD%E4%BB%A4%E5%86%99%E5%88%B0%E8%84%9A%E6%9C%AC-home-www-hexo-webhooks-js%E4%B8%AD%EF%BC%9A"><span class="toc-nav-number">1.7.6.0.1.</span> <span class="toc-nav-text">将命令写到脚本&#x2F;home&#x2F;www&#x2F;hexo&#x2F;webhooks.js中：</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#%E5%9C%A8-etc-rc-d-rc-local%E4%B8%AD%E6%B7%BB%E5%8A%A0%E5%88%9A%E6%89%8D%E7%9A%84%E8%84%9A%E6%9C%AC%EF%BC%9A"><span class="toc-nav-number">1.7.6.0.2.</span> <span class="toc-nav-text">在&#x2F;etc&#x2F;rc.d&#x2F;rc.local中添加刚才的脚本：</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%90%AF%E5%8A%A8%E7%8A%B6%E6%80%81"><span class="toc-nav-number">1.7.6.0.3.</span> <span class="toc-nav-text">查看启动状态</span></a></li></ol></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E5%85%AB%E3%80%81%E5%9C%A8%E6%9C%AC%E5%9C%B0%E5%90%8C%E6%AD%A5soucre%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="toc-nav-number">1.8.</span> <span class="toc-nav-text">八、在本地同步soucre文件夹</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E7%AC%AC%E4%B8%80%E6%AD%A5%E3%80%81%E5%AE%89%E8%A3%85Certbot"><span class="toc-nav-number">1.8.1.</span> <span class="toc-nav-text">第一步、安装Certbot</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E7%AC%AC%E4%BA%8C%E6%AD%A5%E3%80%81%E8%B5%8B%E6%9D%83"><span class="toc-nav-number">1.8.2.</span> <span class="toc-nav-text">第二步、赋权</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E7%AC%AC%E4%B8%89%E6%AD%A5%E3%80%81%E6%89%A7%E8%A1%8C%E8%84%9A%E6%9C%AC"><span class="toc-nav-number">1.8.3.</span> <span class="toc-nav-text">第三步、执行脚本</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E7%AC%AC%E5%9B%9B%E6%AD%A5%E3%80%81%E8%87%AA%E5%8A%A8%E6%9B%B4%E6%96%B0Let%E2%80%99s-Encrypt%E8%AF%81%E4%B9%A6"><span class="toc-nav-number">1.8.4.</span> <span class="toc-nav-text">第四步、自动更新Let’s Encrypt证书</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#1%EF%BC%89%E5%AE%9A%E4%B9%89Systemd%E6%9C%8D%E5%8A%A1certbot-service%EF%BC%9A"><span class="toc-nav-number">1.8.4.1.</span> <span class="toc-nav-text">1）定义Systemd服务certbot.service：</span></a></li></ol></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">问题解决：</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E4%B8%80%E3%80%81Centos7-%E5%AE%89%E8%A3%85gcc-5-2"><span class="toc-nav-number">2.1.</span> <span class="toc-nav-text">一、Centos7 安装gcc-5.2</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E9%97%AE%E9%A2%98%E4%B8%80%EF%BC%9A"><span class="toc-nav-number">2.1.1.</span> <span class="toc-nav-text">问题一：</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E8%A7%A3%E5%86%B3%EF%BC%9A"><span class="toc-nav-number">2.1.2.</span> <span class="toc-nav-text">解决：</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-%E8%8E%B7%E5%8F%96%E6%96%87%E4%BB%B6%EF%BC%9A"><span class="toc-nav-number">2.1.3.</span> <span class="toc-nav-text">1. 获取文件：</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#2-%E5%AE%89%E8%A3%85%E5%9F%BA%E6%9C%AC%E7%BC%96%E8%AF%91%E7%8E%AF%E5%A2%83"><span class="toc-nav-number">2.1.4.</span> <span class="toc-nav-text">2. 安装基本编译环境</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#3-%E8%A7%A3%E5%8E%8B%E5%B9%B6%E6%A3%80%E6%B5%8B%E4%BE%9D%E8%B5%96%E8%84%9A%E6%9C%AC"><span class="toc-nav-number">2.1.5.</span> <span class="toc-nav-text">3. 解压并检测依赖脚本</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#4-%E7%BC%96%E8%AF%91%E7%94%9F%E6%88%90config%E6%96%87%E4%BB%B6"><span class="toc-nav-number">2.1.6.</span> <span class="toc-nav-text">4. 编译生成config文件</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E7%94%9F%E6%88%90%E7%BC%96%E8%AF%91%E6%96%87%E4%BB%B6%EF%BC%9A"><span class="toc-nav-number">2.1.6.1.</span> <span class="toc-nav-text">生成编译文件：</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#5-%E6%89%A7%E8%A1%8C%E7%BC%96%E8%AF%91%EF%BC%8C%E7%94%9F%E6%88%90-Makefile-%E6%96%87%E4%BB%B6%E3%80%82"><span class="toc-nav-number">2.1.7.</span> <span class="toc-nav-text">5. 执行编译，生成 Makefile 文件。</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#6-%E9%87%8D%E5%90%AF%EF%BC%8C%E6%9F%A5%E7%9C%8Bgcc%E7%89%88%E6%9C%AC%EF%BC%9A"><span class="toc-nav-number">2.1.8.</span> <span class="toc-nav-text">6 重启，查看gcc版本：</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#5-%E9%AA%8C%E8%AF%81%E7%89%B9%E6%80%A7%EF%BC%9A"><span class="toc-nav-number">2.1.9.</span> <span class="toc-nav-text">5.  验证特性：</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E9%97%AE%E9%A2%98%E7%8E%B0%E8%B1%A1%E4%BA%8C%EF%BC%9A"><span class="toc-nav-number">2.1.10.</span> <span class="toc-nav-text">问题现象二：</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E5%8E%9F%E5%9B%A0%EF%BC%9A"><span class="toc-nav-number">2.1.11.</span> <span class="toc-nav-text">原因：</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E8%A7%A3%E5%86%B3%EF%BC%9A-2"><span class="toc-nav-number">2.1.12.</span> <span class="toc-nav-text">解决：</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E4%BA%8C%E3%80%81-%E8%A7%A3%E5%86%B3node%E5%AE%89%E8%A3%85%EF%BC%8C%E6%BA%90%E7%A0%81%E7%BC%96%E8%AF%91%E5%8D%87%E7%BA%A7%E5%AE%89%E8%A3%85%E4%BA%86gcc%EF%BC%8C%E5%87%BA%E7%8E%B0%E7%B1%BB%E4%BC%BC%E2%80%99GLIBCXX-3-4-21%E2%80%99-not-found"><span class="toc-nav-number">2.2.</span> <span class="toc-nav-text">二、 解决node安装，源码编译升级安装了gcc，出现类似’GLIBCXX_3.4.21’ not found</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E5%8E%9F%E5%9B%A0%E7%8C%9C%E6%83%B3%EF%BC%9A"><span class="toc-nav-number">2.2.1.</span> <span class="toc-nav-text">原因猜想：</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95%EF%BC%9A"><span class="toc-nav-number">2.2.1.1.</span> <span class="toc-nav-text">解决方法：</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#1-%E6%9F%A5%E7%9C%8B-GLIBCXX-%E7%89%88%E6%9C%AC%EF%BC%9A"><span class="toc-nav-number">2.2.1.1.1.</span> <span class="toc-nav-text">1. 查看 GLIBCXX 版本：</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#2-%E6%89%A7%E8%A1%8C%E4%BB%A5%E4%B8%8B%E5%91%BD%E4%BB%A4%EF%BC%8C%E6%9F%A5%E6%89%BE%E7%BC%96%E8%AF%91-gcc-%E6%97%B6%E7%94%9F%E6%88%90%E7%9A%84%E6%9C%80%E6%96%B0%E5%8A%A8%E6%80%81%E5%BA%93%EF%BC%9A"><span class="toc-nav-number">2.2.1.1.2.</span> <span class="toc-nav-text">2. 执行以下命令，查找编译 gcc 时生成的最新动态库：</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#3-%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C%EF%BC%9A"><span class="toc-nav-number">2.2.1.1.3.</span> <span class="toc-nav-text">3.查询结果：</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#4-%E5%B0%86%E4%B8%8A%E9%9D%A2%E7%9A%84%E6%9C%80%E6%96%B0%E5%8A%A8%E6%80%81%E5%BA%93-libstdc-so-6-0-24-%EF%BC%8C-%E5%A4%8D%E5%88%B6%E5%88%B0-usr-lib64-%E7%9B%AE%E5%BD%95%E4%B8%8B%EF%BC%9A"><span class="toc-nav-number">2.2.1.1.4.</span> <span class="toc-nav-text">4. 将上面的最新动态库 libstdc++.so.6.0.24  ， 复制到 &#x2F;usr&#x2F;lib64 目录下：</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#5-%E5%88%87%E6%8D%A2%E5%B7%A5%E4%BD%9C%E7%9B%AE%E5%BD%95%E8%87%B3-usr-lib64%EF%BC%8C%E5%88%A0%E9%99%A4%E5%8E%9F%E6%9D%A5%E7%9A%84%E8%BD%AF%E9%93%BE%E6%8E%A5%EF%BC%8C-%E5%B0%86%E9%BB%98%E8%AE%A4%E5%BA%93%E7%9A%84%E8%BD%AF%E9%93%BE%E6%8E%A5%E6%8C%87%E5%90%91%E6%9C%80%E6%96%B0%E5%8A%A8%E6%80%81%E5%BA%93%EF%BC%9A"><span class="toc-nav-number">2.2.1.1.5.</span> <span class="toc-nav-text">5. 切换工作目录至 &#x2F;usr&#x2F;lib64，删除原来的软链接， 将默认库的软链接指向最新动态库：</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#5-%E9%87%8D%E6%96%B0%E6%9F%A5%E8%AF%A2%EF%BC%9A"><span class="toc-nav-number">2.2.1.1.6.</span> <span class="toc-nav-text">5. 重新查询：</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#%E6%90%9E%E5%AE%9A%EF%BC%8C%E6%94%B6%E5%B7%A5-%E9%82%A3node%E5%92%8B%E5%8A%9E%EF%BC%9F%EF%BC%9F%E5%9B%9E%E5%A4%B4%E7%BB%A7%E7%BB%AD%E9%87%8D%E6%96%B0%E7%BC%96%E8%AF%91%E3%80%82"><span class="toc-nav-number">2.2.1.1.7.</span> <span class="toc-nav-text">搞定，收工~~那node咋办？？回头继续重新编译。</span></a></li></ol></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E4%B8%89%E3%80%81-hexo-d-%E6%97%B6SSH%E7%AB%AF%E5%8F%A3%E9%94%99%E8%AF%AF"><span class="toc-nav-number">2.3.</span> <span class="toc-nav-text">三、 hexo d 时SSH端口错误</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E9%97%AE%E9%A2%98%EF%BC%9A"><span class="toc-nav-number">2.3.1.</span> <span class="toc-nav-text">问题：</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95%EF%BC%9A-2"><span class="toc-nav-number">2.3.2.</span> <span class="toc-nav-text">解决方法：</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E5%9B%9B%E3%80%81HEXO%E8%AE%BF%E9%97%AE%E9%A1%B5%E9%9D%A2%E9%97%AE%E9%A2%98%EF%BC%9A"><span class="toc-nav-number">2.4.</span> <span class="toc-nav-text">四、HEXO访问页面问题：</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-404-%E6%88%96%E8%80%85403%E6%8A%A5%E9%94%99%E3%80%82"><span class="toc-nav-number">2.4.1.</span> <span class="toc-nav-text">1. 404 或者403报错。</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E6%9B%B4%E6%8D%A2%E5%8D%9A%E5%AE%A2%E7%9B%AE%E5%BD%95%E6%89%80%E5%B1%9E%E7%94%A8%E6%88%B7"><span class="toc-nav-number">2.4.1.1.</span> <span class="toc-nav-text">更换博客目录所属用户</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E6%9B%B4%E6%94%B9nginx-conf%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-nav-number">2.4.1.2.</span> <span class="toc-nav-text">更改nginx.conf配置文件</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#2-%E8%AE%BF%E9%97%AE%E9%A1%B5%E9%9D%A2%E6%98%AF%E4%B8%80%E7%89%87%E7%A9%BA%E7%99%BD"><span class="toc-nav-number">2.4.2.</span> <span class="toc-nav-text">2. 访问页面是一片空白</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#3-CSS%E6%A0%B7%E5%BC%8F%E9%97%AE%E9%A2%98"><span class="toc-nav-number">2.4.3.</span> <span class="toc-nav-text">3.CSS样式问题</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E5%8F%82%E8%80%83%E6%96%87%E6%A1%A3%EF%BC%9A"><span class="toc-nav-number">2.4.3.1.</span> <span class="toc-nav-text">参考文档：</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E4%BA%94%E3%80%81Hexo%E4%B9%8B%E8%A7%A3%E5%86%B3-FATAL-Cannot-read-property-%E2%80%98code%E2%80%99-of-undefined"><span class="toc-nav-number">2.5.</span> <span class="toc-nav-text">五、Hexo之解决 FATAL Cannot read property ‘code’ of undefined</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E6%89%93%E5%BC%80Hexo%E6%A0%B9%E7%9B%AE%E5%BD%95%E4%B8%8B%E7%9A%84-package-json-%E6%96%87%E4%BB%B6%EF%BC%8C"><span class="toc-nav-number">2.5.1.</span> <span class="toc-nav-text">打开Hexo根目录下的 package.json 文件，</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E5%85%AD%E3%80%81HEXO-%E5%8D%B8%E8%BD%BD%EF%BC%9A"><span class="toc-nav-number">2.6.</span> <span class="toc-nav-text">六、HEXO 卸载：</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E4%B8%83%E3%80%81git%E9%97%AE%E9%A2%98%EF%BC%9A"><span class="toc-nav-number">2.7.</span> <span class="toc-nav-text">七、git问题：</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#8-1-GitHub%E5%B8%B8%E8%A7%81%E6%93%8D%E4%BD%9C%E5%92%8C%E5%B8%B8%E8%A7%81%E9%94%99%E8%AF%AF-fatal-remote-origin-already-exists-fatal-Couldn%E2%80%99t-find-remote-ref-master"><span class="toc-nav-number">2.7.1.</span> <span class="toc-nav-text">8.1  GitHub常见操作和常见错误(fatal:remote origin already exists)(fatal: Couldn’t find remote ref master)</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#8-2-git-pull-error-The-following-untracked-working-tree-files-would-be-overwritten-by-merge"><span class="toc-nav-number">2.7.2.</span> <span class="toc-nav-text">8.2  git pull error: The following untracked working tree files would be overwritten by merge</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#8-3-%E8%A7%A3%E5%86%B3Git%E4%B8%ADfatal-refusing-to-merge-unrelated-histories"><span class="toc-nav-number">2.7.3.</span> <span class="toc-nav-text">8.3 解决Git中fatal: refusing to merge unrelated histories</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#8-4-%E8%A7%A3%E5%86%B3%E5%86%B2%E7%AA%81%EF%BC%9A"><span class="toc-nav-number">2.7.4.</span> <span class="toc-nav-text">8.4 解决冲突：</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E9%97%AE%E9%A2%98%E7%8E%B0%E8%B1%A1%EF%BC%8C%E5%88%86%E6%94%AF%E5%86%B2%E7%AA%81%E9%97%AE%E9%A2%98%EF%BC%9A"><span class="toc-nav-number">2.7.4.1.</span> <span class="toc-nav-text">问题现象，分支冲突问题：</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E8%A7%A3%E5%86%B3"><span class="toc-nav-number">2.7.4.2.</span> <span class="toc-nav-text">解决:</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#8-5-Git-%E4%BB%A3%E7%A0%81%E5%86%B2%E7%AA%81%E5%B8%B8%E8%A7%81%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95"><span class="toc-nav-number">2.7.5.</span> <span class="toc-nav-text">8.5 Git:代码冲突常见解决方法</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#8-6-%E8%AE%BE%E7%BD%AE%E4%BA%86-SSH-KEY%E8%BF%98%E9%9C%80%E8%A6%81%E5%AF%86%E7%A0%81%E7%99%BB%E5%BD%95"><span class="toc-nav-number">2.7.6.</span> <span class="toc-nav-text">8.6 设置了 SSH KEY还需要密码登录</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#8-7-fatal-unable-to-access-%E2%80%98https-github-xxxxxxxxx%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95"><span class="toc-nav-number">2.7.7.</span> <span class="toc-nav-text">8.7 fatal: unable to access ‘https:&#x2F;&#x2F;github xxxxxxxxx的解决方法</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link"><span class="toc-nav-number">3.</span> <span class="toc-nav-text">参考文献：</span></a></li></ol>
        
        </div>
      </aside>
    



      <!-- Sidebar Container -->
      <div class="
                col-lg-8 col-lg-offset-1
                col-md-10 col-md-offset-1
                sidebar-container">

        <!-- Featured Tags -->
        
        <section>
          <!-- no hr -->
          <h5>
            <a href="/tags/">FEATURED TAGS</a>
          </h5>
          <div class="tags">
            
            <a class="tag" href="/tags/#blog" title="blog">blog</a>
            
          </div>
        </section>
        

        <!-- Friends Blog -->
        
        <hr>
        <h5>FRIENDS</h5>
        <ul class="list-inline">

          
          <li>
            <a href="https://0nlyuaar0n.top/" target="_blank">0nlyuAar0n</a>
          </li>
          
          <li>
            <a href="https://hexo.io/" target="_blank">Hexo</a>
          </li>
          
        </ul>
        
      </div>
    </div>
  </div>
</article>



<!-- anchorjs start -->
<!-- async load function -->
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script type="text/javascript">
  // async load function
  function async (u, c) {
    var d = document,
      t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) {
      o.addEventListener('load', function(e) {
        c(null, e);
      }, false);
    }
    s.parentNode.insertBefore(o, s);
  };
</script>
<script type="text/javascript">
  //anchor-js, Doc:http://bryanbraun.github.io/anchorjs/
  async ("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js", function() {
    anchors.options = {
      visible: 'hover',
      placement: 'left',
      // icon: 'ℬ'
      icon: '❡'
    };
    anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
  });
</script>
<style>
  /* place left on bigger screen */
  @media all and (min-width: 800px) {
    .anchorjs-link {
      position: absolute;
      left: -0.75em;
      font-size: 1.1em;
      margin-top: -0.1em;
    }
  }
</style>

<!-- anchorjs end -->



		<!-- Footer (contains ThemeColor、viewer) -->
		<!-- Footer -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center">
          

          

          

          

          

          

          

          

        </ul>
        <p class="copyright text-muted">
          Copyright &copy;
          0nlyuAar0n
          2021
          <br>
          Theme by
          <a target="_blank" rel="noopener" href="http://beantech.org">BeanTech</a>
          <span style="display: inline-block; margin: 0 5px;">
            <i class="fa fa-heart"></i>
          </span>
          re-Ported by
          <a target="_blank" rel="noopener" href="https://v-vincen.life/">Live My Life</a>
          |
          <iframe style="margin-left: 2px; margin-bottom:-5px;" frameborder="0" scrolling="0" width="91px" height="20px" src="https://ghbtns.com/github-btn.html?user=V-Vincen&repo=V-Vincen.github.io&type=star&count=true"></iframe>
        </p>
      </div>
    </div>
  </div>
</footer>

<a id="rocket" href="#top" class=""></a>


  <!-- jQuery -->
  <script type="text/javascript" src="/js/jquery.min.js"></script>
  <!-- Bootstrap Core JavaScript -->
  <script type="text/javascript" src="/js/bootstrap.min.js"></script>
  <!-- Custom Theme JavaScript -->
  <script type="text/javascript" src="/js/hux-blog.min.js"></script>
  <!-- catalog -->
  <script async="true" type="text/javascript" src="/js/catalog.js"></script>
  <!-- totop(rocket) -->
  <script async="true" type="text/javascript" src="/js/totop.js"></script>

  
    <!-- Busuanzi JavaScript -->
    <script async="async" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  

  
    <!-- Scroll start -->
    <script async="async" type="text/javascript" src="/js/scroll.js"></script>
    <!-- Scroll end -->
  

  

  
    <!-- Mouseclick -->
    <script type="text/javascript" src="/js/mouseclick.js" content='The first step is as good as half over...,Laugh and grow fat...,Man proposes God disposes...,When all else is lost the future still remains...,Wasting time is robbing oneself...,Sharp tools make good work...,Cease to struggle and you cease to live...,A friend in need is a friend indeed...,Faith can move mountains...' color='#9933CC,#339933,#66CCCC,#FF99CC,#CCCCFF,#6666CC,#663399,#66CC99,#FF0033'></script>
  

  
    <!-- ribbon -->
    <script type="text/javascript" src="/js/ribbonDynamic.js"></script>
  

  






  <!-- viewer start -->
  <!-- viewer start (Picture preview) -->
  
    <script async="async" type="text/javascript" src="/js/viewer/viewer.min.js"></script>
    <script async="async" type="text/javascript" src="/js/viewer/pic-viewer.js"></script>
  

  <!-- viewer end -->


<script>
  // async load function
  function async (u, c) {
    var d = document,
      t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) {
      o.addEventListener('load', function (e) {
        c(null, e);
      }, false);
    }
    s.parentNode.insertBefore(o, s);
  }

  // fastClick.js
  async ("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function () {
    var $nav = document.querySelector("nav");
    if ($nav)
      FastClick.attach($nav);
    }
  )
</script>

<!-- Because of the native support for backtick-style fenced code blocks right within the Markdown is landed in Github Pages, From V1.6, There is no need for Highlight.js, so Huxblog drops it officially. -
https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0 - https://help.github.com/articles/creating-and-highlighting-code-blocks/ -->
<!-- <script> async ("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function () { hljs.initHighlightingOnLoad(); }) </script> <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet"> -->

<!-- jquery.tagcloud.js -->
<!-- <script> // only load tagcloud.js in tag.html if ($('#tag_cloud').length !== 0) { async ("http://yoursite-url/js/jquery.tagcloud.js", function () { $.fn.tagcloud.defaults = { // size: { start: 1, end: 1, unit: 'em' }, color: {
start: '#bbbbee', end: '#0085a1' } }; $('#tag_cloud a').tagcloud(); }) } </script> -->


		<!-- Search -->
		
		<div class="popup search-popup local-search-popup">
  <span class="popup-btn-close">
    ESC
  </span>
  <div class="container">
    <div class="row">
      <!-- <div class="col-md-9 col-md-offset-1"> -->
      <div class="col-lg-9 col-lg-offset-1 col-md-10 col-md-offset-1 local-search-content">

        <div class="local-search-header clearfix">

          <div class="local-search-input-wrapper">
            <span class="search-icon">
              <i class="fa fa-search fa-lg" style="margin: 25px 10px 25px 20px;"></i>
            </span>
            <input autocomplete="off" placeholder="SEARCH..." type="text" id="local-search-input">
          </div>
        </div>
        <div id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>


  
    <script src="/js/ziploader.js"></script>
  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.json";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    // monitor main search box;
    var onPopupClose = function (e) {
      $('.popup').fadeOut(300);
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $('.popup').fadeIn(300);
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }
    // get search zip version
    $.get('/searchVersion.json?t=' + (+new Date()), function (res) {
      if (localStorage.getItem('searchVersion') !== res) {
        localStorage.setItem('searchVersion', res);
        initSearchJson();
      }
    });

    function initSearchJson() {
      initLoad(['/search.flv'], {
        loadOptions: {
          success: function (obj) {
            localStorage.setItem('searchJson', obj['search.json'])
          },
          error: function (e) {
            return console.log(e)
          }
        },
        returnOptions: {
          'json': TYPE_TEXT
        },
        mimeOptions: {
          'json': 'application/json'
        }
      })
    }
    // search function;
    var searchFunc = function (search_id, content_id) {
      'use strict';
      isfetched = true;
      var datas = JSON.parse(localStorage.getItem('searchJson'));
      // console.log(search_id)
      var input = document.getElementById(search_id);
      var resultContent = document.getElementById(content_id);
      var inputEventFunction = function () {
        var searchText = input.value.trim().toLowerCase();
        var keywords = searchText.split(/[\s\-]+/);
        if (keywords.length > 1) {
          keywords.push(searchText);
        }
        var resultItems = [];
        if (searchText.length > 0) {
          // perform local searching
          datas.forEach(function (data) {
            var isMatch = false;
            var hitCount = 0;
            var searchTextCount = 0;
            var title = data.title
              ? data.title.trim()
              : '';
            var titleInLowerCase = title.toLowerCase();
            var content = data.content
              ? data.content.trim().replace(/<[^>]+>/g, "")
              : '';
            var contentInLowerCase = content.toLowerCase();
            var articleUrl = decodeURIComponent(data.url);

            var date = data.date;
            var dateTime = date.replace(/T/, " ").replace(/.000Z/, "");
            var imgUrl = data.header_img;
            


            var indexOfTitle = [];
            var indexOfContent = [];
            // only match articles with not empty titles
            keywords.forEach(function (keyword) {
              function getIndexByWord(word, text, caseSensitive) {
                var wordLen = word.length;
                if (wordLen === 0) {
                  return [];
                }
                var startPosition = 0,
                  position = [],
                  index = [];
                if (!caseSensitive) {
                  text = text.toLowerCase();
                  word = word.toLowerCase();
                }
                while ((position = text.indexOf(word, startPosition)) > -1) {
                  index.push({position: position, word: word});
                  startPosition = position + wordLen;
                }
                return index;
              }
              indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
              indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
            });
            if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
              isMatch = true;
              hitCount = indexOfTitle.length + indexOfContent.length;
            }
            // show search results
            if (isMatch) {
              // sort index by position of keyword
              [indexOfTitle, indexOfContent].forEach(function (index) {
                index.sort(function (itemLeft, itemRight) {
                  if (itemRight.position !== itemLeft.position) {
                    return itemRight.position - itemLeft.position;
                  } else {
                    return itemLeft.word.length - itemRight.word.length;
                  }
                });
              });
              // merge hits into slices
              function mergeIntoSlice(text, start, end, index) {
                var item = index[index.length - 1];
                var position = item.position;
                var word = item.word;
                var hits = [];
                var searchTextCountInSlice = 0;
                while (position + word.length <= end && index.length != 0) {
                  if (word === searchText) {
                    searchTextCountInSlice++;
                  }
                  hits.push({position: position, length: word.length});
                  var wordEnd = position + word.length;
                  // move to next position of hit
                  index.pop();
                  while (index.length != 0) {
                    item = index[index.length - 1];
                    position = item.position;
                    word = item.word;
                    if (wordEnd > position) {
                      index.pop();
                    } else {
                      break;
                    }
                  }
                }
                searchTextCount += searchTextCountInSlice;
                return {hits: hits, start: start, end: end, searchTextCount: searchTextCountInSlice};
              }
              var slicesOfTitle = [];
              if (indexOfTitle.length != 0) {
                slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
              }
              var slicesOfContent = [];
              while (indexOfContent.length != 0) {
                var item = indexOfContent[indexOfContent.length - 1];
                var position = item.position;
                var word = item.word;
                // cut out 100 characters
                var start = position - 20;
                var end = position + 80;
                if (start < 0) {
                  start = 0;
                }
                if (end < position + word.length) {
                  end = position + word.length;
                }
                if (end > content.length) {
                  end = content.length;
                }
                slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
              }
              // sort slices in content by search text's count and hits' count
              slicesOfContent.sort(function (sliceLeft, sliceRight) {
                if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                  return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                  return sliceRight.hits.length - sliceLeft.hits.length;
                } else {
                  return sliceLeft.start - sliceRight.start;
                }
              });
              // select top N slices in content
              var upperBound = parseInt('1');
              if (upperBound >= 0) {
                slicesOfContent = slicesOfContent.slice(0, upperBound);
              }
              // highlight title and content
              function highlightKeyword(text, slice) {
                var result = '';
                var prevEnd = slice.start;
                slice.hits.forEach(function (hit) {
                  result += text.substring(prevEnd, hit.position);
                  var end = hit.position + hit.length;
                  result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                  prevEnd = end;
                });
                result += text.substring(prevEnd, slice.end);
                return result;
              }
              var resultItem = '';

              // if (slicesOfTitle.length != 0) {   resultItem += "<li><a target='_blank' href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>"; } else {   resultItem += "<li><a target='_blank' href='" +
              // articleUrl + "' class='search-result-title'>" + title + "</a>"; } slicesOfContent.forEach(function (slice) {   resultItem += "<a target='_blank' href='" + articleUrl + "'><p class=\"search-result\">" + highlightKeyword(content, slice) +
              // "...</p></a>"; }); resultItem += "</li>";

              if (slicesOfTitle.length != 0) {
                resultItem += "<a target='_blank' href='" + articleUrl + "' class='search-result'><div class='search-result-left'><div class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</div><time class='search-result-date'>" + dateTime + "</time>";
              } else {
                resultItem += "<a target='_blank' href='" + articleUrl + "' class='search-result'><div class='search-result-left'><div class='search-result-title'>" + title + "</div><time class='search-result-date'>" + dateTime + "</time>";
              }
              slicesOfContent.forEach(function (slice) {
                resultItem += "<p class=\"search-result-content\">" + highlightKeyword(content, slice) + "...</p>";
              });
              resultItem += "</div><div class='search-result-right'><img class='media-image' src='" + imgUrl + "' width='64px' height='48px'></img></div></a>";

              resultItems.push({item: resultItem, searchTextCount: searchTextCount, hitCount: hitCount, id: resultItems.length});
            }
          })
        };

        if (keywords.length === 1 && keywords[0] === "") {
          resultContent.innerHTML = '<div id="no-result"></div>'
        } else if (resultItems.length === 0) {
          resultContent.innerHTML = '<div id="no-result"></div>'
        } else {
          resultItems.sort(function (resultLeft, resultRight) {
            if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
              return resultRight.searchTextCount - resultLeft.searchTextCount;
            } else if (resultLeft.hitCount !== resultRight.hitCount) {
              return resultRight.hitCount - resultLeft.hitCount;
            } else {
              return resultRight.id - resultLeft.id;
            }
          });
          var searchResultList = '<div class=\"search-result-list\">';
          resultItems.forEach(function (result) {
            searchResultList += result.item;
          })
          searchResultList += "</div>";
          resultContent.innerHTML = searchResultList;
        }
      }
      if ('auto' === 'auto') {
        input.addEventListener('input', inputEventFunction);
      } else {
        $('.search-icon').click(inputEventFunction);
        input.addEventListener('keypress', function (event) {
          if (event.keyCode === 13) {
            inputEventFunction();
          }
        });
      }
      // remove loading animation
      $('body').css('overflow', '');
      proceedsearch();
    }
    // handle and trigger popup window;
    $('.popup-trigger').click(function (e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc('local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });
    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function (e) {
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 && $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });

    document.addEventListener('mouseup', (e) => {
      var _con = document.querySelector(".local-search-content");
      if (_con) {
        if (!_con.contains(e.target)) {
          onPopupClose();
        }
      }
    });
  </script>


		
	<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>
</html>
