<!DOCTYPE html>
<html lang="en">

<!-- Head tag (contains Google-Analytics、Baidu-Tongji)-->
<head>
  <!-- Google Analytics -->
  
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-124651948-1"></script>
    <script type="text/javascript">
      window.dataLayer = window.dataLayer || [];

      function gtag() {
        dataLayer.push(arguments);
      }
      gtag('js', new Date());

      gtag('config', 'UA-124651948-1');
    </script>
  

  <!-- Baidu Tongji -->
  

  <!-- Baidu Push -->
  
    <script>
      (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
      })();
    </script>
  

  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>

  <meta name="google-site-verification" content="lxDfCplOZbIzjhG34NuQBgu2gdyRlAtMB4utP5AgEBc"/>
  <meta name="baidu-site-verification" content="PpzM9WxOJU"/>

  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="description" content="0nlyu‘blog"/>
  <meta name="keyword" content="终极目标: 吃, 喝 ,玩, 乐"/>
  <link rel="shortcut icon" href="/img/avatar/A.jpeg"/>

  <!-- Place this tag in your head or just before your close body tag. -->
  <script async="async" defer="defer" src="https://buttons.github.io/buttons.js"></script>

  
    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css"/>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/beantech.min.css"/>

    <!-- Pygments Highlight CSS -->
    <link rel="stylesheet" href="/css/highlight.css"/>
    <link rel="stylesheet" href="/css/widget.css"/>
    <link rel="stylesheet" href="/css/rocket.css"/>
    <link rel="stylesheet" href="/css/signature.css"/>
    <link rel="stylesheet" href="/css/catalog.css"/>
    <link rel="stylesheet" href="/css/livemylife.css"/>

    
      <!-- wave start -->
      <link rel="stylesheet" href="/css/wave.css"/>
      <!-- wave end -->
    

    
      <!-- top start (article top hot config) -->
      <link rel="stylesheet" href="/css/top.css"/>
      <!-- top end -->
    

    
      <!-- ThemeColor start -->
      <link rel="stylesheet" href="/css/scroll.css"/>
      <!-- ThemeColor end -->
    

    
      <!-- viewer start (Picture preview) -->
      <link rel="stylesheet" href="/css/viewer.min.css"/>
      <!-- viewer end -->
    

    
      <!-- Search start -->
      <link rel="stylesheet" href="/css/search.css"/>
      <!-- Search end -->
    

    
      <!-- ThemeColor start -->
      <link rel="stylesheet" href="/css/themecolor.css"/>
      <!-- ThemeColor end -->
    

    

    
      <!-- gitalk start -->
      <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css"> -->
      <link rel="stylesheet" href="/css/gitalk.css"/>
      <!-- gitalk end -->
    
  

  <!-- Custom Fonts -->
  <!-- <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
  <!-- Hux change font-awesome CDN to qiniu -->
  <link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" type="text/css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <!-- Hux Delete, sad but pending in China <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'> <link
  href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/ css'> -->

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]> <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script> <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script> <![endif]-->

  <!-- ga & ba script hoook -->
  <link rel="canonical" href="http://yoursite-url/渗透测试/【红队攻防】SQL注入基础及利用链/">
  <title>
    
      【红队攻防】SQL注入利用链之基础 - 0nlyuAar0n|di.did.didi.di..
    
  </title>
<meta name="generator" content="Hexo 5.4.0"></head>


<!-- hack iOS CSS :active style -->

	<body ontouchstart="" class="body--light body--light">


		<!-- ThemeColor -->
		
		<!-- ThemeColor -->
<style type="text/css">
  .body--light {
    --light-mode: none;
    --dark-mode: block;
  }
  .body--dark {
    --light-mode: block;
    --dark-mode: none;
  }
  i.mdui-icon.material-icons.light-mode {
    display: var(--light-mode);
  }
  i.mdui-icon.material-icons.dark-mode {
    display: var(--dark-mode);
  }
</style>
<div class="toggle" onclick="document.body.classList.toggle('body--dark')">
  <i class="mdui-icon material-icons light-mode"></i>
  <i class="mdui-icon material-icons dark-mode"></i>
</div>
<script>
  //getCookieValue
  function getCookieValue(a) {
    var b = document.cookie.match('(^|[^;]+)\\s*' + a + '\\s*=\\s*([^;]+)');
    return b
      ? b.pop()
      : '';
  }
  let themeMode = 'light';
  if (getCookieValue('sb-color-mode') && (getCookieValue('sb-color-mode') !== themeMode)) {
    let dbody = document.body.classList;
    themeMode === 'dark' ? dbody.remove('body--dark') : dbody.add('body--dark');
  }

  //setCookieValue
  var toggleBtn = document.querySelector(".toggle");
  toggleBtn.addEventListener("click", function () {
    var e = document.body.classList.contains("body--dark");
    var cookieString = e
      ? "dark"
      : "light";
    var exp = new Date();
    exp.setTime(exp.getTime() + 3 * 24 * 60 * 60 * 1000); //3天过期
    document.cookie = "sb-color-mode=" + cookieString + ";expires=" + exp.toGMTString() + ";path=/";
  });
</script>

		

		<!-- Gitter -->
		

		<!-- Navigation (contains search)-->
		<!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header page-scroll">
      <button type="button" class="navbar-toggle">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">奈何太菜...</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <!-- Known Issue, found by Hux: <nav>'s height woule be hold on by its content. so, when navbar scale out, the <nav> will cover tags. also mask any touch event of tags, unfortunately. -->
    <div id="huxblog_navbar">
      <div class="navbar-collapse">
        <ul class="nav navbar-nav navbar-right">
          <li>
            <a href="/">HOME</a>
          </li>

          
          
          
          
          <li>
            <a href="/archive/">
              
              ARCHIVES
              
              
            </a>
          </li>
          
          
          
          <li>
            <a href="/categories/">
              
              CATEGORIES
              
              
            </a>
          </li>
          
          
          
          <li>
            <a href="/tags/">
              
              TAGS
              
              
            </a>
          </li>
          
          
          
          <li>
            <a href="/about/">
              
              ABOUT
              
              
            </a>
          </li>
          
          

          
          <li>
            <a class="popup-trigger">
              <span class="search-icon"></span>SEARCH</a>
          </li>
          

          <!-- LangSelect -->
          
        </ul>
      </div>
    </div>
    <!-- /.navbar-collapse -->
  </div>
  <!-- /.container -->
</nav>
<!-- progress -->
<div id="progress">
  <div class="line" style="width: 0%;"></div>
</div>

<script>
  // Drop Bootstarp low-performance Navbar Use customize navbar with high-quality material design animation in high-perf jank-free CSS3 implementation
  var $body = document.body;
  var $toggle = document.querySelector('.navbar-toggle');
  var $navbar = document.querySelector('#huxblog_navbar');
  var $collapse = document.querySelector('.navbar-collapse');

  $toggle.addEventListener('click', handleMagic)

  function handleMagic(e) {
    if ($navbar.className.indexOf('in') > 0) {
      // CLOSE
      $navbar.className = " ";
      // wait until animation end.
      setTimeout(function() {
        // prevent frequently toggle
        if ($navbar.className.indexOf('in') < 0) {
          $collapse.style.height = "0px"
        }
      }, 400)
    } else {
      // OPEN
      $collapse.style.height = "auto"
      $navbar.className += " in";
    }
  }
</script>


		<!-- Post Header (contains intro-header、signature、wordcount、busuanzi、waveoverlay) -->
		<!-- Modified by Yu-Hsuan Yen -->
<!-- Post Header -->

  <style type="text/css">
    .body--light {
      /* intro-header */
      --intro-header-background-image-url-home: url('/img/header_img/GoFar.jpg');
      --intro-header-background-image-url-post: url('/img/header_img/PTES/v3Sql.jpg');
      --intro-header-background-image-url-page: url('//img/header_img/PTES/v3Sql.jpg');
    }
    .body--dark {
      --intro-header-background-image-url-home: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2)), url('/img/header_img/GoFar.jpg');
      --intro-header-background-image-url-post: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2)), url('/img/header_img/PTES/v3Sql.jpg');
      --intro-header-background-image-url-page: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2)), url('//img/header_img/PTES/v3Sql.jpg');
    }

    header.intro-header {
       /*post*/
        background-image: var(--intro-header-background-image-url-post);
        /* background-image: url('/img/header_img/PTES/v3Sql.jpg'); */
      
    }

    
      #signature {/*signature*/
        background-image: url('/img/signature/white.png');
      }
    
  </style>





<header class="intro-header">
  <!-- Signature -->
  <div id="signature">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
          
          <div class="post-heading">
            <div class="tags">
              
              <a class="tag" href="/tags/#渗透测试" title="渗透测试">渗透测试</a>
              
              <a class="tag" href="/tags/#SQL" title="SQL">SQL</a>
              
            </div>
            <h1>【红队攻防】SQL注入利用链之基础</h1>
            <h2 class="subheading"></h2>
            <span class="meta">
              Posted by 0nlyuAar0n on
              2021-08-15
            </span>


            
            <!-- WordCount start -->
            <div class="blank_box"></div>
            <span class="meta">
              Estimated Reading Time <span class="post-count">16</span> Minutes
            </span>
            <div class="blank_box"></div>
            <span class="meta">
              Words <span class="post-count">4.1k</span> In Total
            </span>
            <div class="blank_box"></div>
            <!-- WordCount end -->
            
            
            <!-- 不蒜子统计 start -->
            <span class="meta" id="busuanzi_container_page_pv">
              Viewed <span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span> Times
            </span>
            <!-- 不蒜子统计 end -->
            


          </div>
          
        </div>
      </div>
    </div>
  </div>

  
  <!-- waveoverlay start -->
  <div class="preview-overlay">
    <svg class="preview-waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
      <defs>
        <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"></path>
      </defs>
      <g class="preview-parallax">
        <use xlink:href="#gentle-wave" x="48" y="0" fill=var(--gentle-wave1)></use>
        <use xlink:href="#gentle-wave" x="48" y="3" fill=var(--gentle-wave2)></use>
        <use xlink:href="#gentle-wave" x="48" y="5" fill=var(--gentle-wave3)></use>
        <use xlink:href="#gentle-wave" x="48" y="7" fill=var(--gentle-wave)></use>
      </g>
    </svg>
  </div>
  <!-- waveoverlay end -->
  

</header>



		<!-- Main Content (Post contains
	Pager、
	tip、
	socialshare、
	gitalk、gitment、disqus-comment、
	Catalog、
	Sidebar、
	Featured-Tags、
	Friends Blog、
	anchorjs、
	) -->
		<!-- Modify by Yu-Hsuan Yen -->
<!-- Post Content -->
<article>
  <div class="container">
    <div class="row">
      <!-- Post Container -->
      <div class="col-lg-8 col-lg-offset-1 col-md-10 col-md-offset-1 post-container">

        <blockquote>
<p>昨夜西风凋碧树。独上高楼，望尽天涯路。</p>
</blockquote>
<h1>SQL注入基础</h1>
<h2 id="1-SQL注入原理">1. SQL注入原理</h2>
<h3 id="什么是sql">什么是sql</h3>
<p>​	SQL是一门ANSI的标准计算机语言，用来访问和操作数据库系统。用于<code>增删改查数据库中的数据</code>。<br>
​	sql可以与数据库程序协同工作，常见的数据库如：</p>
<ul>
<li>MS Access</li>
<li>DB2</li>
<li>infomix</li>
<li>MS SQL Server</li>
<li>Mysql</li>
<li>Oracle</li>
<li>postgresql</li>
<li>…</li>
</ul>
<p>​	虽然存在很多不同版本的SQL语言，但为了与ANSI标准相兼容，必须以相似的方式共同支持一些主要关键词（如select、update、delete、insert、where等）。</p>
<h3 id="SQL语句常见操作方式">SQL语句常见操作方式</h3>
<p><strong>select 查询数据</strong></p>
<p>在网站应用中进行数据显示查询操作<br>
例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> news <span class="keyword">where</span> id<span class="operator">=</span>$id</span><br></pre></td></tr></table></figure>
<p><strong>insert 插入数据</strong></p>
<p>在网站应用中进行用户注册添加等操作<br>
例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> news(id,url,text) <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">&#x27;x&#x27;</span>,<span class="string">&#x27;$t&#x27;</span>)</span><br></pre></td></tr></table></figure>
<p><strong>delete 删除数据</strong></p>
<p>后台管理里面删除文章删除用户等操作<br>
例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> news <span class="keyword">where</span> id<span class="operator">=</span>$id</span><br></pre></td></tr></table></figure>
<p><strong>update 更新数据</strong></p>
<p>会员或后台中心数据同步或缓存等操作<br>
例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update <span class="keyword">user</span> <span class="keyword">set</span> pwd<span class="operator">=</span><span class="string">&#x27;$p&#x27;</span> <span class="keyword">where</span> id<span class="operator">=</span><span class="number">2</span> <span class="keyword">and</span> username<span class="operator">=</span><span class="string">&#x27;admin&#x27;</span></span><br></pre></td></tr></table></figure>
<p><strong>order by 排序数据</strong></p>
<p>一般结合表名或列名进行数据排序操作<br>
例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> news <span class="keyword">order</span> <span class="keyword">by</span> $id</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> id,name,price <span class="keyword">from</span> news <span class="keyword">order</span> <span class="keyword">by</span> $<span class="keyword">order</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>注:</p>
<ul>
<li>可通过以上查询方式与网站应用的关系</li>
<li>注入点产生地方或应用猜测到对方的SQL查询方式</li>
<li>只要存在前后台交互的地方都可能存在注入漏洞</li>
</ul>
</blockquote>
<h3 id="什么是sql注入">什么是sql注入</h3>
<p>​	SQL注入攻击，是由于程序对用户的操作输入未进行正确或不严格的检查过滤，用户通过操作输入修改SQL语句，<code>将用户的输入/payload以拼接的方式带入SQL语句中</code>，并被SQL引擎解析成SQL代码，再将这些语句传递给后端的数据库执行，从而引发实际执行的语句与预期执行的语句不一样，达到攻击目的的技术。</p>
<h3 id="注入条件">注入条件</h3>
<ol>
<li><strong>参数用户可控：用户可控的前后端参数传递</strong></li>
</ol>
<p>如: input标签传递到后端java MyBatis处理参数可控。</p>
<ol start="2">
<li><strong>参数带入数据库操作：参数未限制输入，直接拼接入数据库操作</strong></li>
</ol>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$id</span> = <span class="variable">$_REQUEST</span>[ <span class="string">&#x27;id&#x27;</span> ];</span><br><span class="line"><span class="variable">$query</span> = <span class="string">&quot;SELECT * FROM user WHERE username = &#x27;<span class="subst">$id</span>&#x27;&quot;</span>；</span><br></pre></td></tr></table></figure>
<p>这里<code>$id</code>可控，可通过用户输入修改sql语句逻辑，即可达到攻击母的。</p>
<blockquote>
<p>ps: 这里造成SQL注入漏洞原因有两个：一个是没有对输入的数据进行过滤(过滤输入)，还有一个是没有对发送到数据库的数据进行转义(转义输出)</p>
</blockquote>
<h3 id="注入点">注入点</h3>
<ul>
<li>认证页面</li>
<li>搜索页面</li>
<li>Post请求</li>
<li>Get请求</li>
<li>HTTP头部</li>
<li>Cookie</li>
<li>边缘输入点</li>
<li>等</li>
</ul>
<h3 id="危害：">危害：</h3>
<ul>
<li>泄露系统中的敏感信息。</li>
<li>数据库信息泄漏：数据库中存放的用户的隐私信息的泄露。作为数据的存储中心，数据库里往往保存着各类的隐私信息，SQL注入攻击能导致这些隐私信息透明于攻击者。</li>
<li>网页篡改：通过操作数据库对数据内容被篡改、特定网页进行篡改。</li>
<li>登录认证被绕过</li>
<li>其他,例如服务器上的文件被读取或修改/服务器上的程序被执行、数据破坏、挂马攻击、服务器被控制等。</li>
</ul>
<h3 id="常见的修复方案">常见的修复方案</h3>
<ol>
<li>黑/白名单过滤、关键字替换、过滤</li>
<li>预编译、绑定变量</li>
<li>输入输出转义</li>
<li>参数化查询</li>
<li>安全机制防御
<ul>
<li>RASP</li>
<li>WAF</li>
<li>安全函数</li>
</ul>
</li>
</ol>
<h3 id="注入流程">注入流程</h3>
<p>注入点检测–&gt;&gt;DBMS标识–&gt;&gt;构造相应payload–&gt;&gt;信息利用/提权/执行命令/横向移动/数据泄露/持久等</p>
<h2 id="2-SQL注入的基本分类">2. SQL注入的基本分类</h2>
<h3 id="参数类型分类">参数类型分类</h3>
<p>数字型注入：输入参数为整型时，如Id、年龄和手机号等；</p>
<p>字符型注入：输入参数为字符串型时，如姓名、公司、住址等；</p>
<blockquote>
<p>最大的区别： 字符型注入一般要使用单引号进行闭合，而数字型注入则不需要。</p>
</blockquote>
<h3 id="注入点分类">注入点分类</h3>
<p>GET注入：注入字符在URL参数中；</p>
<p>POST注入：注入字段在POST提交的数据中；</p>
<p>Cookie注入：注入字段在Cookie数据中，网站使用通用的防注入程序，会对GET、POST提交的数据进行过滤，却往往遗漏Cookie中的数据进行过滤。</p>
<p>HTTP头部注入：HTTP请求的其他内容触发的SQL注入漏洞。</p>
<p>搜索注入： 指在进行数据搜索时没过滤搜索参数，一般在链接地址、搜索框中。</p>
<p>其他：认证页面、万能密码等。</p>
<h3 id="结果反馈分类">结果反馈分类</h3>
<h4 id="非盲注"><strong>非盲注</strong></h4>
<p>非盲注入（正常SQL注入）：执行注入SQL语句将敏感信息展示出来，并进行进一步的操作。</p>
<h4 id="盲注"><strong>盲注</strong></h4>
<p>盲注是指获取的数据不能回显至前端页面，不会存在任何数据库报错内容，此时就需要利用一些方法进行判断或尝试，这个过程称之为<code>盲注</code></p>
<p>它是依据构造真或假的问题对数据库进行“提问”，注入方式主要有两种：<code>基于布尔值与基于时间</code>。</p>
<blockquote>
<p>盲注一般结合工具进行，纯手工难度大。</p>
</blockquote>
<h5 id="基于布尔值">基于布尔值</h5>
<p>简而言之，就是根据页面回显的不同来判断。</p>
<p>如：</p>
<p>MySQL中判断数据名长度的输入payload</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span><span class="string">&#x27; and length(database()) = 10 #</span></span><br></pre></td></tr></table></figure>
<p>此时，可通过相应页面返回的正确与否来判断and后面的值是否为真，数据库名的长度是否为10。</p>
<p><strong>如何获取每一个数据?</strong></p>
<p>利用MySQL自带函数进行提取，如substring()、mid()、subst()、left(),、right()、substring_index()等。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># <span class="comment">--------------------利用ASCII码猜解当前数据库名称</span></span><br><span class="line"><span class="keyword">and</span> (ascii(substr(database(),<span class="number">1</span>,<span class="number">1</span>)))<span class="operator">=</span><span class="number">115</span><span class="comment">--+  #返回正常，说明数据库名称第一位是s</span></span><br><span class="line"><span class="keyword">and</span> (ascii(substr(database(),<span class="number">2</span>,<span class="number">1</span>)))<span class="operator">=</span><span class="number">101</span><span class="comment">--+  # 返回正常，说明数据库名称第二位是e</span></span><br><span class="line"># <span class="comment">--------------------猜表名</span></span><br><span class="line"><span class="keyword">and</span> (ascii(substr((<span class="keyword">select</span> table_name <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema<span class="operator">=</span>database() limit <span class="number">0</span>,<span class="number">1</span>),<span class="number">1</span>,<span class="number">1</span>)))<span class="operator">=</span><span class="number">101</span><span class="comment">--+ # 返回正常，说明数据库表名的第一个的第一位是e</span></span><br><span class="line"># <span class="comment">---------------------猜字段名</span></span><br><span class="line"><span class="keyword">and</span> (ascii(substr((<span class="keyword">select</span> column_name <span class="keyword">from</span> information_schema.columns <span class="keyword">where</span> table_name<span class="operator">=</span><span class="string">&#x27;表名&#x27;</span> limit <span class="number">0</span>,<span class="number">1</span>),<span class="number">1</span>,<span class="number">1</span>)))<span class="operator">=</span><span class="number">102</span><span class="comment">--+ # 返回正常，说明表中的列名称第一位是f</span></span><br><span class="line"># <span class="comment">---------------------猜内容</span></span><br><span class="line"><span class="keyword">and</span> (ascii(substr(( <span class="keyword">select</span> 字段名 <span class="keyword">from</span> 表名 limit <span class="number">3</span>,<span class="number">1</span>),<span class="number">1</span>,<span class="number">1</span>)))<span class="operator">=</span><span class="number">122</span><span class="comment">--+ # 返回正常，说明第四列第一位是122，122等于z</span></span><br><span class="line"></span><br><span class="line"># <span class="comment">---------------------substring()、mid()、subst()</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">substring</span>(&quot;123&quot;,<span class="number">2</span>,<span class="number">1</span>),mid(&quot;adcde&quot;,<span class="number">1</span>,<span class="number">1</span>),substr(&quot;12345&quot;,<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="operator">|</span> <span class="built_in">substring</span>(&quot;123&quot;,<span class="number">2</span>,<span class="number">1</span>)   <span class="operator">|</span>    mid(&quot;adcde&quot;,<span class="number">1</span>,<span class="number">1</span>)<span class="operator">|</span> substr(&quot;12345&quot;,<span class="number">1</span>,<span class="number">1</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> :<span class="comment">-------------------------| ----------------------:| :----------------------: |</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span>                                    <span class="operator">|</span> a                                <span class="operator">|</span>  <span class="number">1</span>                                 <span class="operator">|</span>  </span><br></pre></td></tr></table></figure>
<blockquote>
<p>字符串截取：substring_index(str,delim,count)</p>
<ul>
<li>截取第二个 ‘.’ 之前的所有字符。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select substring_index(<span class="string">&#x27;www.example.com&#x27;</span>, <span class="string">&#x27;.&#x27;</span>, 2);</span><br><span class="line">+------------------------------------------------+</span><br><span class="line">| substring_index(<span class="string">&#x27;www.example.com&#x27;</span>, <span class="string">&#x27;.&#x27;</span>, 2) |</span><br><span class="line">+------------------------------------------------+</span><br><span class="line">| www.example                               |</span><br><span class="line">+------------------------------------------------+ </span><br></pre></td></tr></table></figure>
<ul>
<li>截取第二个 ‘.’ （倒数）之后的所有字符。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select substring_index(<span class="string">&#x27;www.example.com&#x27;</span>, <span class="string">&#x27;.&#x27;</span>, -2);</span><br><span class="line">+-------------------------------------------------+</span><br><span class="line">| substring_index(<span class="string">&#x27;www.example.com&#x27;</span>, <span class="string">&#x27;.&#x27;</span>, -2) |</span><br><span class="line">+-------------------------------------------------+</span><br><span class="line">| example.com                                          |</span><br><span class="line">+-------------------------------------------------+ </span><br></pre></td></tr></table></figure>
<ul>
<li>如果在字符串中找不到 delim 参数指定的值，就返回整个字符串</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select substring_index(<span class="string">&#x27;www.example.com&#x27;</span>, <span class="string">&#x27;.coc&#x27;</span>, 1);</span><br><span class="line">+---------------------------------------------------+</span><br><span class="line">| substring_index(<span class="string">&#x27;www.example.com&#x27;</span>, <span class="string">&#x27;.coc&#x27;</span>, 1) |</span><br><span class="line">+---------------------------------------------------+</span><br><span class="line">| www.example.com                               |</span><br><span class="line">+---------------------------------------------------+ </span><br></pre></td></tr></table></figure>
</blockquote>
<h5 id="基于时间">基于时间</h5>
<p>在某些情况下，页面回显的内容一致，需借助其他手段来SQL注入判断，如服务器执行SQL语句所需要的时间。</p>
<p>基于时间的SQL盲注方式，通常是在SQL语句中添加延时函数，如通过<code>sleep()</code>函数，利用IF条件或ADN、OR函数的<code>短路特性和SQL执行的时间</code>来判断是否存在SQL注入。（实战于4.2介绍）</p>
<p>常用的延时函数或指令有<code>sleep</code>、<code>repeat</code>等。</p>
<h3 id="其他类型">其他类型</h3>
<p><strong>延时注入：</strong> 使用延时函数方式。</p>
<p><strong>宽字节注入：</strong> 设置MySQL连接时错误配置为：<code>set character_set_client=gbk</code>，这样配置会引发编码转换从而导致的注入漏洞。</p>
<p><strong>编码注入：</strong> 将输入的字符串进行编码，如base64、urldecode、base64_decode等。</p>
<p><strong>报错注入：</strong> 由于开启错误调试信息，导致可看到语句执行后的报错信息输出，从而引发sql注入。</p>
<p><strong>DNSLOG注入：</strong>  在注入无回显时，利用MySQL数据库的 LOAD_FILE() 读取文件的函数去拼接查询结果并访问用于拼接的dns平台，然后通过平台去进行查看接收到的数据。</p>
<p><strong>堆查询注入：</strong> 同时执行多条语句。</p>
<p><strong>联合查询注入：</strong> 使用union语句合并两条或多条SQL语句。</p>
<p><strong>多阶注入：</strong> 由多个HTTP请求响应共同完成的注入。</p>
<p><strong>二次注入：</strong>   根本问题是，开发者信任数据库中取出的数据是无害的。payload拼接进行SQL注入，在全局过滤后入库时，进行了转义，入库后，转义符会消失，这个时候出库被带入到其他SQL语句就会引入payload导致注入。</p>
<p><strong>XFF注入：</strong> X- Forwarded-For头带入数据操作时，参数由用户可控，传递中存在SQL注入。</p>
<p><strong>存储过程：</strong> 存储过程包含参数，在参数传递中存在SQL注入。</p>
<hr>
<p>注入技巧使用优先级：</p>
<p>UNION注入&gt;报错注入&gt;布尔盲注&gt;时间盲注</p>
<blockquote>
<p>其他注入通常需要结合其他技巧使用才能获取数据</p>
</blockquote>
<h2 id="3-常用函数及变量">3. 常用函数及变量</h2>
<h4 id="常用的字符串-系统函数">常用的字符串/系统函数</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">@<span class="variable">@datadir</span>		#数据库路径</span><br><span class="line">@<span class="variable">@version</span>_compile_os		#操作系统版本</span><br><span class="line">DATABASE()     		#返回当前数据库名</span><br><span class="line"><span class="keyword">USER</span>()或<span class="built_in">SYSTEM_USER</span>()    		#返回当前登陆用户名</span><br><span class="line">VERSION()     		#返回数据库的版本</span><br><span class="line"></span><br><span class="line">SLEEP(n)  		#休眠n秒</span><br><span class="line">ASCII(<span class="type">char</span>)         #返回字符的ASCII码值</span><br><span class="line">ord()			#返回字符串第一个字符的ASCII值</span><br><span class="line"><span class="type">char</span>()			# 返回整数ASCIId</span><br><span class="line">mid()			#返回一个字符串的一部分</span><br><span class="line"><span class="keyword">SELECT</span> MID(<span class="string">&#x27;字符串&#x27;</span>, 起始位置, 截取长度)</span><br><span class="line">length()          #函数 返回字符串长度</span><br><span class="line">substr()          #函数 截取字符串 语法：(substr(string,<span class="keyword">start</span>,leng)</span><br><span class="line">if(ex1,ex2,ex3)            #判断语句，如果ex1正确，执行ex2，错误执行ex3</span><br><span class="line"></span><br><span class="line"><span class="keyword">left</span>() 			#返回字符串最左边的几个字符</span><br><span class="line"><span class="built_in">floor</span>()			# 返回小于或等于x的最大整数</span><br><span class="line">rand()			#返回<span class="number">0</span>和<span class="number">1</span>之间的一个随机数</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="字符串连接函数">字符串连接函数</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">GROUP_CONCAT(str1,str2,...))     # 返回由属于一组的列值连接组合而成的结果</span><br><span class="line">concat(str1,str2,...)		#没有分隔符的连接字符串</span><br><span class="line">concat_ws(separator,str1,str2,...)		#含有分隔符的连接字符串</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="SQL判断语句：">SQL判断语句：</h4>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">or</span> <span class="number">1</span><span class="operator">=</span><span class="number">1</span><span class="comment">--+</span></span><br><span class="line"><span class="string">&#x27;or 1=1--+</span></span><br><span class="line"><span class="string">&quot;or 1=1--+</span></span><br><span class="line"><span class="string">)or 1=1--+</span></span><br><span class="line"><span class="string">&#x27;</span>)<span class="keyword">or</span> <span class="number">1</span><span class="operator">=</span><span class="number">1</span><span class="comment">--+</span></span><br><span class="line">&quot;) or 1=1--+</span><br><span class="line">&quot;))<span class="keyword">or</span> <span class="number">1</span><span class="operator">=</span><span class="number">1</span><span class="comment">--+</span></span><br></pre></td></tr></table></figure>
<h4 id="PHP">PHP</h4>
<p>PHP 中的许多预定义变量都是“超全局的”，这意味着它们在一个脚本的全部作用域中都可用。这些超全局变量是：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="variable">$_REQUEST</span> （获取GET/POST/COOKIE） COOKIE在新版本已经无法获取了</span><br><span class="line"><span class="variable">$_POST</span>  （获取POST传参）</span><br><span class="line"><span class="variable">$_GET</span>  (获取GET的传参)</span><br><span class="line"><span class="variable">$_COOKIE</span>   （获取COOKIE的值）</span><br><span class="line"><span class="variable">$_SERVER</span>  （包含了诸如头信息(header)、路径(path)、以及脚本位置(script     locations)等等信息的数组）</span><br><span class="line"><span class="variable">$_SERVER</span>功能</span><br><span class="line">  常用的：</span><br><span class="line">  <span class="variable">$_SERVER</span>[<span class="string">&#x27;HTTP_HOST&#x27;</span>]  请求头信息中的Host内容，获取当前域名。</span><br><span class="line">  <span class="variable">$_SERVER</span>[<span class="string">&quot;HTTP_USER_AGENT&quot;</span>]  获取用户相关信息，包括用户浏览器、操作    系统等信息。</span><br><span class="line">  <span class="variable">$_SERVER</span>[<span class="string">&quot;REMOTE_ADDR&quot;</span>]  浏览网页的用户ip。</span><br></pre></td></tr></table></figure>
<h4 id="Bypass常用简记：">Bypass常用简记：</h4>
<p>详细另开一篇来说</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- and /or过滤</span></span><br><span class="line"><span class="keyword">or</span>     ——<span class="operator">&gt;</span>   <span class="operator">||</span></span><br><span class="line"><span class="keyword">and</span>     ——<span class="operator">&gt;</span>   <span class="operator">&amp;&amp;</span></span><br><span class="line">xor   ——<span class="operator">&gt;</span>   <span class="operator">|</span>  </span><br><span class="line"><span class="keyword">not</span>    ——<span class="operator">&gt;</span>  <span class="operator">!</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">-- urlencode，ascii(char)，hex，unicode等编码绕过</span></span><br><span class="line"><span class="comment">-- unicode编码举例：</span></span><br><span class="line"><span class="comment">-- 单引号：&#x27;</span></span><br><span class="line">  <span class="operator">%</span>u0027 <span class="operator">%</span>u02b9 <span class="operator">%</span>u02bc</span><br><span class="line">  <span class="operator">%</span>u02c8 <span class="operator">%</span>u2032</span><br><span class="line">  <span class="operator">%</span>uff07 <span class="operator">%</span>c0<span class="operator">%</span><span class="number">27</span></span><br><span class="line">  <span class="operator">%</span>c0<span class="operator">%</span>a7 <span class="operator">%</span>e0<span class="operator">%</span><span class="number">80</span><span class="operator">%</span>a7</span><br><span class="line"><span class="comment">-- 注释符</span></span><br><span class="line"> <span class="comment">/**/</span> </span><br><span class="line"> <span class="operator">%</span><span class="number">23</span> </span><br><span class="line"> <span class="comment">--+ </span></span><br><span class="line"> <span class="comment">/*!50000union*/</span></span><br><span class="line"><span class="comment">-- 空白符</span></span><br><span class="line"><span class="operator">%</span><span class="number">09</span>,<span class="operator">%</span><span class="number">0</span>a,<span class="operator">%</span><span class="number">0</span>b,<span class="operator">%</span><span class="number">0</span>c,<span class="operator">%</span><span class="number">0</span>d,<span class="operator">%</span><span class="number">20</span>,<span class="operator">%</span>a0</span><br><span class="line"></span><br><span class="line">   </span><br><span class="line"><span class="comment">-- 双写</span></span><br><span class="line">selselectect</span><br><span class="line">uniunionon</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 等价函数或变量</span></span><br><span class="line">hex()、bin() <span class="operator">=</span><span class="operator">=</span><span class="operator">&gt;</span> ascii()</span><br><span class="line"></span><br><span class="line">sleep() <span class="operator">=</span><span class="operator">=</span><span class="operator">&gt;</span>benchmark()</span><br><span class="line"></span><br><span class="line">concat_ws()<span class="operator">=</span><span class="operator">=</span><span class="operator">&gt;</span>group_concat()</span><br><span class="line"></span><br><span class="line">mid()、substr() <span class="operator">=</span><span class="operator">=</span><span class="operator">&gt;</span> <span class="built_in">substring</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">--------------------</span></span><br><span class="line"><span class="comment">-- 关于waf</span></span><br><span class="line">常见绕过手法:</span><br><span class="line">		大小写绕过 （很老的WAF才有用）</span><br><span class="line">		替换绕过 （很老的WAF才有用）【和上传文件那个pphphp一样】</span><br><span class="line">		特殊字符绕过 （<span class="operator">%</span><span class="number">0</span>a换行）``</span><br><span class="line">		编码绕过 （比如会多次解码的东西，例如我们DOM XSS绕狗那个）</span><br><span class="line">		等价替换 （利用其它函数替代）[<span class="keyword">union</span> #<span class="operator">%</span><span class="number">0</span>aselect 拦截][<span class="keyword">union</span> <span class="keyword">all</span> #<span class="operator">%</span><span class="number">0</span>aselect 不拦截]</span><br><span class="line">		容器特性（例如Apace的Hpp,或者是IIS的<span class="operator">%</span>分割）</span><br><span class="line">		白名单（管理员权限或者是<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>本地访问不拦截）</span><br><span class="line">		缓冲区    （数据太多了，超出了WAF检测的范围）</span><br><span class="line">........</span><br></pre></td></tr></table></figure>
<h2 id="4-SQL注入点判断">4. SQL注入点判断</h2>
<h3 id="常规手法">常规手法</h3>
<p>注入存在多种检测方式，最简单无外乎在各种参数后添加<code>“</code>或<code>’</code>，从而来通过服务器返回的数据响应报错信息来分析。</p>
<p>通过应用程序的报错触发及布尔逻辑，可以轻松判断易受攻击的参数。</p>
<blockquote>
<p>注入简记</p>
</blockquote>
<table>
<thead>
<tr>
<th>描述</th>
<th>语句</th>
</tr>
</thead>
<tbody>
<tr>
<td>逻辑测试</td>
<td>page.asp?id=1 or 1=1 – true  page.asp?id=1’ or 1=1 – true page.asp?id=1&quot; or 1=1 – true page.asp?id=1 and 1=2 – false</td>
</tr>
<tr>
<td>算术</td>
<td>product.asp?id=1/1 – true  product.asp?id=1/0 – false</td>
</tr>
<tr>
<td>基于盲注： 检测盲注可能需要识别或猜测DBMS， 并检查以找到适当的时间函数。</td>
<td>Mysql：<br>*<code>SELECT IF(user() LIKE 'root@%', SLEEP(5), null)</code> <br>*Oracle:<br><code>SELECT CASE WHEN (SELECT COUNT(*) FROM v$version WHERE banner LIKE  'Oracle%11.2%')=1 THEN (SELECT count(*) FROM all_users a, all_users b,  all_users c, all_users d) ELSE 0 END FROM dual</code><br>SQL Server<br><br><code>*IF exists(SELECT @@version where @@version like '%12.0.2000.8%') WAITFOR DELAY '00:00:02'*</code></td>
</tr>
<tr>
<td>基于错误： 注意：使用无效语法的逻辑测试和算术 也可能会导致错误。</td>
<td>Mysql：<br>*<code>SELECT extractvalue(rand(),concat(0x3a,(select version())))</code> <br>*Oracle:<br><code>SELECT utl_inaddr.get_host_name((select banner from v$version where rownum=1)) FROM dual</code><br>SQL Server<br><br><code>*SELECT convert(int,(SELECT @@version)) '*</code></td>
</tr>
</tbody>
</table>
<h3 id="时间注入判断法">时间注入判断法</h3>
<p>&lt;待补充实战&gt;</p>
<h3 id="批量判断法">批量判断法</h3>
<ul>
<li>SQLMAP</li>
<li>sqliv</li>
<li>sqlmapapi.</li>
<li>URL参数批量提取去重后再结合漏洞扫描工具</li>
</ul>
<h2 id="5-SQL注入常见注释符">5. SQL注入常见注释符</h2>
<h3 id="常规注释：">常规注释：</h3>
<p>SQL 语句注释方法有<code>/* */</code> 和<code>-- (空格)</code>和<code># </code>三种</p>
<h3 id="php中的注释符：">php中的注释符：</h3>
<ul>
<li><code>//</code></li>
<li><code>/*...*/</code></li>
<li><code>#</code></li>
</ul>
<h3 id="JavaScript中的注释符：">JavaScript中的注释符：</h3>
<ul>
<li><code>//</code></li>
<li><code>/*...*/</code></li>
</ul>
<h3 id="html中的注释符：">html中的注释符：</h3>
<ul>
<li><code>&lt;!--内容--&gt;</code></li>
</ul>
<h3 id="MySQL中的注释符：">MySQL中的注释符：</h3>
<ul>
<li>
<p><code>#</code></p>
</li>
<li>
<p>内联注释<code>/*...*/</code><br>
在mysql中是多行注释 但是如果里面加了! 那么后面的内容会被执行</p>
</li>
<li>
<p><code>--空格</code></p>
</li>
<li>
<p><code>--+</code></p>
<ul>
<li><code>--（空格）</code>一般不能直接使用，因为只使用<code>--（空格）</code>的时候无法对sql语句进行闭合，在传输过程中空格会被忽略，导致无法注释，所以需要需要<code>+</code>或是<code>’</code>、<code>%20</code>*（把空格转换未urlencode编码格式）*来对其进行闭合完成注入语句。</li>
<li><code>+</code>会被解析成空格； <code>--</code>是SQL的注释标记，使用时后面的一切字符串都会比当做注释忽略掉</li>
</ul>
<blockquote>
<p>postgersql注释符号也是–+</p>
</blockquote>
</li>
</ul>
<h3 id="Mssql-注释">Mssql 注释</h3>
<table>
<thead>
<tr>
<th>操作</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>--</code></td>
<td>SQL注释</td>
</tr>
<tr>
<td><code>; 00％</code></td>
<td>空字节</td>
</tr>
<tr>
<td><code>/ *</code></td>
<td>C语言风格注释</td>
</tr>
</tbody>
</table>
<h3 id="Oracle注释">Oracle注释</h3>
<ul>
<li>
<p>单行注释符号是<code>--</code></p>
</li>
<li>
<p>多行注释符号<code>/**/</code></p>
</li>
</ul>
<h3 id="URL中-、？、-、-解释：">URL中<code>#</code>、<code>？</code>、<code>&amp;</code>、<code>+</code>解释：</h3>
<h4 id="说明"><code>#</code>说明</h4>
<p><strong><code>#</code>的涵义</strong></p>
<ul>
<li><code>#</code>在URL 中会被认为是锚点， sql注入中想要使用需要进行编码。 url 编码为<code>%23</code>。</li>
<li><code>#</code>代表网页中的一个位置。其右面的字符，就是该位置的标识符。比如，<a target="_blank" rel="noopener" href="http://www.example.com/index.html#print%E5%B0%B1%E4%BB%A3%E8%A1%A8%E7%BD%91%E9%A1%B5index.html%E7%9A%84print%E4%BD%8D%E7%BD%AE%E3%80%82%E6%B5%8F%E8%A7%88%E5%99%A8%E8%AF%BB%E5%8F%96%E8%BF%99%E4%B8%AAURL%E5%90%8E%EF%BC%8C%E4%BC%9A%E8%87%AA%E5%8A%A8%E5%B0%86print%E4%BD%8D%E7%BD%AE%E6%BB%9A%E5%8A%A8%E8%87%B3%E5%8F%AF%E8%A7%86%E5%8C%BA%E5%9F%9F">http://www.example.com/index.html#print就代表网页index.html的print位置。浏览器读取这个URL后，会自动将print位置滚动至可视区域</a></li>
</ul>
<p><strong>HTTP请求不包括 <code># </code></strong></p>
<ul>
<li><code>#</code>是用来指导浏览器动作的，对服务器端完全无用。所以，HTTP请求中不包括#</li>
</ul>
<p><strong><code>#</code>后的字符</strong></p>
<ul>
<li>在第一个#后面出现的任何字符，都会被浏览器解读为位置标识符。这意味着，这些字符都不会被发送到服务器端</li>
</ul>
<h4 id="说明-2"><code>?</code>说明</h4>
<p><strong>连接作用</strong></p>
<ul>
<li>通过<code>？</code>来带参数，连接域名和参数，经常会用到。</li>
</ul>
<p><strong>清除缓存</strong></p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="regexp">//</span>www.xxxxx.com/index.html</span><br><span class="line">http:<span class="regexp">//</span>www.xxxxx.com/index.html?test123123</span><br></pre></td></tr></table></figure>
<ul>
<li>两个url打开的页面一样，但是后面这个有问号，说明不调用缓存的内容，而认为是一个新地址，重新读取。因为在做http请求的时候，如果浏览器检测到你的地址完全没变，会从缓存里读取先前请求过的数据，不再发送请求。有些时候是页面资源的加载，有些时候是API的get请求，都有可能。加上这个，会让浏览器认为这是一个新的地址，从而保证重新获取资源。</li>
</ul>
<h4 id="说明-3"><code>&amp;</code>说明</h4>
<p><strong>不同参数的间隔符</strong></p>
<ul>
<li><code>http://www.xxx.com/Show.asp?id=77&amp;nameid=2905210001&amp;page=1</code></li>
</ul>
<h4 id="说明-4"><code>+</code>说明</h4>
<p><code>+</code>在URL 中会被认为是空格,所以<code>--+</code>和<code>--空格</code>在sql中都有注释的意思</p>
<h1>参考链接：</h1>
<ol>
<li><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/p_NHl975fhjUMlx5LKxRHw">https://mp.weixin.qq.com/s/p_NHl975fhjUMlx5LKxRHw</a></li>
<li><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/L5RuWT7V9q4b6OZwfdscjg">https://mp.weixin.qq.com/s/L5RuWT7V9q4b6OZwfdscjg</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/xiaozi/p/5538380.html">https://www.cnblogs.com/xiaozi/p/5538380.html</a></li>
</ol>


        <hr>
        <!-- Pager -->
        <ul class="pager">
          
          <li class="previous">
            <a href="/Tools/kali之网络助手肝墙/" data-toggle="tooltip" data-placement="top" title="kali之网络助手肝墙">&larr; Previous Post</a>
          </li>
          
          
          <li class="next">
            <a href="/渗透测试/速查表/xss盲打payload及其绕过/" data-toggle="tooltip" data-placement="top" title="xss盲打payload及其绕过">Next Post &rarr;</a>
          </li>
          
        </ul>

        
        <!-- tip start -->
        <!-- tip -->
<!-- tip start -->
<div class="tip">
  <p>
    
      -------------------------------------------------------------------------------- If you like this blog or find it useful for you, you are welcome to comment on it. You are also welcome to share this blog, so that more people can participate in it. If the images used in the blog infringe your copyright, please contact the author to delete them. Thank you !
    
  </p>
</div>
<!-- tip end -->

        <!-- tip end -->
        

        
        <!-- Sharing Srtart -->
        <!-- Social Social Share Post -->
<!-- Docs:https://github.com/overtrue/share.js -->

<div class="social-share" data-initialized="true" data-disabled="tencent ,douban ,qzone ,linkedin ,facebook ,google ,diandian" data-wechat-qrcode-helper="" align="center">
  <ul class="list-inline text-center social-share-ul">
    <li class="social-share-li">
      <a target="_blank" class="social-share-icon icon-twitter">
        <i class="fa fa-twitter fa-1x" aria-hidden="true"></i>
      </a>
    </li>
    <li class="social-share-li">
      <a class="social-share-icon icon-wechat">
        <i class="fa fa-weixin fa-1x" aria-hidden="true"></i>
      </a>
    </li>
    <li class="social-share-li">
      <a target="_blank" class="social-share-icon icon-weibo">
        <i class="fa fa-weibo fa-1x" aria-hidden="true"></i>
      </a>
    </li>
    <li class="social-share-li">
      <a target="_blank" class="social-share-icon icon-qq">
        <i class="fa fa-qq fa-1x" aria-hidden="true"></i>
      </a>
    </li>
    <li class="social-share-li">
      <a target="_blank" class="social-share-icon" href="mailto:?subject=【红队攻防】SQL注入利用链之基础&body=Hi,I found this website and thought you might like it http://yoursite-url/渗透测试/【红队攻防】SQL注入基础及利用链/">
        <i class="fa fa-envelope fa-1x" aria-hidden="true"></i>
      </a>
    </li>
  </ul>
</div>

<!-- css & js -->
<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css"> -->
<script defer="defer" async="true" src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>

        <!-- Sharing End -->
        
        <hr>

        <!-- comments start -->
        <!-- 1. gitalk comment -->

  <!-- gitalk start -->
  <!-- Docs:https://github.com/gitalk/gitalk/blob/master/readme-cn.md -->

  <div id="gitalk-container"></div>

  
    <!-- <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.js"></script> -->
    <script src="/js/comment/gitalk.js"></script>
  

  <script>
    var gitalk = new Gitalk({
      clientID: '6daf597fa0a20b7d167d',
      clientSecret: 'd7815897cdef77f24783de4c4023612fd330929d',
      repo: 'https://github.com/0nlyuAarOn/BloG_gitalk.git',
      owner: '0nlyuAar0n',
      admin: '[&#39;0nlyu&#39;]',
      id: 'Sun Aug 15 2021 19:19:47 GMT+0800', // Ensure uniqueness and length less than 50
      distractionFreeMode: false, // Facebook-like distraction free mode
      perPage: 10,
      pagerDirection: 'last',
      createIssueManually: false,
      language: 'en',
      proxy: 'https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token'
    });
    gitalk.render('gitalk-container');

    var gtFolded = () => {
      setTimeout(function () {
        let markdownBody = document.getElementsByClassName("markdown-body");
        let list = Array.from(markdownBody);
        list.forEach(item => {
          if (item.clientHeight > 250) {
            item.classList.add('gt-comment-body-folded');
            item.style.maxHeight = '250px';
            item.title = 'Click to Expand';
            item.onclick = function () {
              item.classList.remove('gt-comment-body-folded');
              item.style.maxHeight = '';
              item.title = '';
              item.onclick = null;
            };
          }
        })
      }, 800);
    }
  </script>

  <!-- gitalk end -->


<!-- 2. gitment comment -->


<!-- 3. disqus comment -->


        <!-- comments end -->
        <hr>

      </div>

      <!-- Catalog: Tabe of Content -->
      <!-- Table of Contents -->

    
      <aside id="sidebar">
        <div id="toc" class="toc-article">
        <strong class="toc-title">Contents</strong>
        
          <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">SQL注入基础</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#1-SQL%E6%B3%A8%E5%85%A5%E5%8E%9F%E7%90%86"><span class="toc-nav-number">1.1.</span> <span class="toc-nav-text">1. SQL注入原理</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFsql"><span class="toc-nav-number">1.1.1.</span> <span class="toc-nav-text">什么是sql</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#SQL%E8%AF%AD%E5%8F%A5%E5%B8%B8%E8%A7%81%E6%93%8D%E4%BD%9C%E6%96%B9%E5%BC%8F"><span class="toc-nav-number">1.1.2.</span> <span class="toc-nav-text">SQL语句常见操作方式</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFsql%E6%B3%A8%E5%85%A5"><span class="toc-nav-number">1.1.3.</span> <span class="toc-nav-text">什么是sql注入</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E6%B3%A8%E5%85%A5%E6%9D%A1%E4%BB%B6"><span class="toc-nav-number">1.1.4.</span> <span class="toc-nav-text">注入条件</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E6%B3%A8%E5%85%A5%E7%82%B9"><span class="toc-nav-number">1.1.5.</span> <span class="toc-nav-text">注入点</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E5%8D%B1%E5%AE%B3%EF%BC%9A"><span class="toc-nav-number">1.1.6.</span> <span class="toc-nav-text">危害：</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84%E4%BF%AE%E5%A4%8D%E6%96%B9%E6%A1%88"><span class="toc-nav-number">1.1.7.</span> <span class="toc-nav-text">常见的修复方案</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E6%B3%A8%E5%85%A5%E6%B5%81%E7%A8%8B"><span class="toc-nav-number">1.1.8.</span> <span class="toc-nav-text">注入流程</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#2-SQL%E6%B3%A8%E5%85%A5%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%88%86%E7%B1%BB"><span class="toc-nav-number">1.2.</span> <span class="toc-nav-text">2. SQL注入的基本分类</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E5%8F%82%E6%95%B0%E7%B1%BB%E5%9E%8B%E5%88%86%E7%B1%BB"><span class="toc-nav-number">1.2.1.</span> <span class="toc-nav-text">参数类型分类</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E6%B3%A8%E5%85%A5%E7%82%B9%E5%88%86%E7%B1%BB"><span class="toc-nav-number">1.2.2.</span> <span class="toc-nav-text">注入点分类</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E7%BB%93%E6%9E%9C%E5%8F%8D%E9%A6%88%E5%88%86%E7%B1%BB"><span class="toc-nav-number">1.2.3.</span> <span class="toc-nav-text">结果反馈分类</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E9%9D%9E%E7%9B%B2%E6%B3%A8"><span class="toc-nav-number">1.2.3.1.</span> <span class="toc-nav-text">非盲注</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E7%9B%B2%E6%B3%A8"><span class="toc-nav-number">1.2.3.2.</span> <span class="toc-nav-text">盲注</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#%E5%9F%BA%E4%BA%8E%E5%B8%83%E5%B0%94%E5%80%BC"><span class="toc-nav-number">1.2.3.2.1.</span> <span class="toc-nav-text">基于布尔值</span></a></li><li class="toc-nav-item toc-nav-level-5"><a class="toc-nav-link" href="#%E5%9F%BA%E4%BA%8E%E6%97%B6%E9%97%B4"><span class="toc-nav-number">1.2.3.2.2.</span> <span class="toc-nav-text">基于时间</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E5%85%B6%E4%BB%96%E7%B1%BB%E5%9E%8B"><span class="toc-nav-number">1.2.4.</span> <span class="toc-nav-text">其他类型</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#3-%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0%E5%8F%8A%E5%8F%98%E9%87%8F"><span class="toc-nav-number">1.3.</span> <span class="toc-nav-text">3. 常用函数及变量</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E5%B8%B8%E7%94%A8%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2-%E7%B3%BB%E7%BB%9F%E5%87%BD%E6%95%B0"><span class="toc-nav-number">1.3.0.1.</span> <span class="toc-nav-text">常用的字符串&#x2F;系统函数</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BF%9E%E6%8E%A5%E5%87%BD%E6%95%B0"><span class="toc-nav-number">1.3.0.2.</span> <span class="toc-nav-text">字符串连接函数</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#SQL%E5%88%A4%E6%96%AD%E8%AF%AD%E5%8F%A5%EF%BC%9A"><span class="toc-nav-number">1.3.0.3.</span> <span class="toc-nav-text">SQL判断语句：</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#PHP"><span class="toc-nav-number">1.3.0.4.</span> <span class="toc-nav-text">PHP</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#Bypass%E5%B8%B8%E7%94%A8%E7%AE%80%E8%AE%B0%EF%BC%9A"><span class="toc-nav-number">1.3.0.5.</span> <span class="toc-nav-text">Bypass常用简记：</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#4-SQL%E6%B3%A8%E5%85%A5%E7%82%B9%E5%88%A4%E6%96%AD"><span class="toc-nav-number">1.4.</span> <span class="toc-nav-text">4. SQL注入点判断</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E5%B8%B8%E8%A7%84%E6%89%8B%E6%B3%95"><span class="toc-nav-number">1.4.1.</span> <span class="toc-nav-text">常规手法</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E6%97%B6%E9%97%B4%E6%B3%A8%E5%85%A5%E5%88%A4%E6%96%AD%E6%B3%95"><span class="toc-nav-number">1.4.2.</span> <span class="toc-nav-text">时间注入判断法</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E6%89%B9%E9%87%8F%E5%88%A4%E6%96%AD%E6%B3%95"><span class="toc-nav-number">1.4.3.</span> <span class="toc-nav-text">批量判断法</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#5-SQL%E6%B3%A8%E5%85%A5%E5%B8%B8%E8%A7%81%E6%B3%A8%E9%87%8A%E7%AC%A6"><span class="toc-nav-number">1.5.</span> <span class="toc-nav-text">5. SQL注入常见注释符</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E5%B8%B8%E8%A7%84%E6%B3%A8%E9%87%8A%EF%BC%9A"><span class="toc-nav-number">1.5.1.</span> <span class="toc-nav-text">常规注释：</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#php%E4%B8%AD%E7%9A%84%E6%B3%A8%E9%87%8A%E7%AC%A6%EF%BC%9A"><span class="toc-nav-number">1.5.2.</span> <span class="toc-nav-text">php中的注释符：</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#JavaScript%E4%B8%AD%E7%9A%84%E6%B3%A8%E9%87%8A%E7%AC%A6%EF%BC%9A"><span class="toc-nav-number">1.5.3.</span> <span class="toc-nav-text">JavaScript中的注释符：</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#html%E4%B8%AD%E7%9A%84%E6%B3%A8%E9%87%8A%E7%AC%A6%EF%BC%9A"><span class="toc-nav-number">1.5.4.</span> <span class="toc-nav-text">html中的注释符：</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#MySQL%E4%B8%AD%E7%9A%84%E6%B3%A8%E9%87%8A%E7%AC%A6%EF%BC%9A"><span class="toc-nav-number">1.5.5.</span> <span class="toc-nav-text">MySQL中的注释符：</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Mssql-%E6%B3%A8%E9%87%8A"><span class="toc-nav-number">1.5.6.</span> <span class="toc-nav-text">Mssql 注释</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Oracle%E6%B3%A8%E9%87%8A"><span class="toc-nav-number">1.5.7.</span> <span class="toc-nav-text">Oracle注释</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#URL%E4%B8%AD-%E3%80%81%EF%BC%9F%E3%80%81-%E3%80%81-%E8%A7%A3%E9%87%8A%EF%BC%9A"><span class="toc-nav-number">1.5.8.</span> <span class="toc-nav-text">URL中#、？、&amp;、+解释：</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E8%AF%B4%E6%98%8E"><span class="toc-nav-number">1.5.8.1.</span> <span class="toc-nav-text">#说明</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E8%AF%B4%E6%98%8E-2"><span class="toc-nav-number">1.5.8.2.</span> <span class="toc-nav-text">?说明</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E8%AF%B4%E6%98%8E-3"><span class="toc-nav-number">1.5.8.3.</span> <span class="toc-nav-text">&amp;说明</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#%E8%AF%B4%E6%98%8E-4"><span class="toc-nav-number">1.5.8.4.</span> <span class="toc-nav-text">+说明</span></a></li></ol></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">参考链接：</span></a></li></ol>
        
        </div>
      </aside>
    



      <!-- Sidebar Container -->
      <div class="
                col-lg-8 col-lg-offset-1
                col-md-10 col-md-offset-1
                sidebar-container">

        <!-- Featured Tags -->
        
        <section>
          <!-- no hr -->
          <h5>
            <a href="/tags/">FEATURED TAGS</a>
          </h5>
          <div class="tags">
            
            <a class="tag" href="/tags/#渗透测试" title="渗透测试">渗透测试</a>
            
            <a class="tag" href="/tags/#SQL" title="SQL">SQL</a>
            
          </div>
        </section>
        

        <!-- Friends Blog -->
        
        <hr>
        <h5>FRIENDS</h5>
        <ul class="list-inline">

          
          <li>
            <a href="https://www.nhtcai.top/" target="_blank">0nlyuAar0n</a>
          </li>
          
          <li>
            <a href="https://www.nhtc.wiki/" target="_blank">奈何太菜</a>
          </li>
          
          <li>
            <a href="https://hexo.io/" target="_blank">Hexo</a>
          </li>
          
        </ul>
        
      </div>
    </div>
  </div>
</article>



<!-- anchorjs start -->
<!-- async load function -->
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script type="text/javascript">
  // async load function
  function async (u, c) {
    var d = document,
      t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) {
      o.addEventListener('load', function(e) {
        c(null, e);
      }, false);
    }
    s.parentNode.insertBefore(o, s);
  };
</script>
<script type="text/javascript">
  //anchor-js, Doc:http://bryanbraun.github.io/anchorjs/
  async ("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js", function() {
    anchors.options = {
      visible: 'hover',
      placement: 'left',
      // icon: 'ℬ'
      icon: '❡'
    };
    anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
  });
</script>
<style>
  /* place left on bigger screen */
  @media all and (min-width: 800px) {
    .anchorjs-link {
      position: absolute;
      left: -0.75em;
      font-size: 1.1em;
      margin-top: -0.1em;
    }
  }
</style>

<!-- anchorjs end -->



		<!-- Footer (contains ThemeColor、viewer) -->
		<!-- Footer -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center">
          

          

          

          

          

          

          

          

        </ul>
        <p class="copyright text-muted">
          Copyright &copy;
          0nlyuAar0n
          2021
          <br>
          Theme by
          <a target="_blank" rel="noopener" href="https://v-vincen.life/">Live My Life</a>
          <span style="display: inline-block; margin: 0 5px;">
            <i class="fa fa-heart"></i>
          </span>
          <!-- <iframe style="margin-left: 2px; margin-bottom:-5px;" frameborder="0" scrolling="0" width="91px" height="20px" src="https://ghbtns.com/github-btn.html?user=V-Vincen&repo=V-Vincen.github.io&type=star&count=true"></iframe> -->
        </p>
      </div>
    </div>
  </div>
</footer>

<a id="rocket" href="#top" class=""></a>


  <!-- jQuery -->
  <script type="text/javascript" src="/js/jquery.min.js"></script>
  <!-- Bootstrap Core JavaScript -->
  <script type="text/javascript" src="/js/bootstrap.min.js"></script>
  <!-- Custom Theme JavaScript -->
  <script type="text/javascript" src="/js/hux-blog.min.js"></script>
  <!-- catalog -->
  <script async="true" type="text/javascript" src="/js/catalog.js"></script>
  <!-- totop(rocket) -->
  <script async="true" type="text/javascript" src="/js/totop.js"></script>

  
    <!-- Busuanzi JavaScript -->
    <script async="async" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  

  
    <!-- Scroll start -->
    <script async="async" type="text/javascript" src="/js/scroll.js"></script>
    <!-- Scroll end -->
  

  

  
    <!-- Mouseclick -->
    <script type="text/javascript" src="/js/mouseclick.js" content='The first step is as good as half over...,Le vent se lève, il faut tenter de vivre...,I shot an arrow into the air...,It fell to earth, I knew not where...,Some of us get dipped in flat...,some in satin, some in gloss...,But every once in a while you find someone who&#39;s iridescent...,and when you do, nothing will ever compare...,Bravery never goes out of fashion...' color='#9933CC,#339933,#66CCCC,#FF99CC,#CCCCFF,#6666CC,#663399,#66CC99,#FF0033'></script>
  

  
    <!-- ribbon -->
    <script type="text/javascript" src="/js/ribbonDynamic.js"></script>
  

  






  <!-- viewer start -->
  <!-- viewer start (Picture preview) -->
  
    <script async="async" type="text/javascript" src="/js/viewer/viewer.min.js"></script>
    <script async="async" type="text/javascript" src="/js/viewer/pic-viewer.js"></script>
  

  <!-- viewer end -->


<script>
  // async load function
  function async (u, c) {
    var d = document,
      t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) {
      o.addEventListener('load', function (e) {
        c(null, e);
      }, false);
    }
    s.parentNode.insertBefore(o, s);
  }

  // fastClick.js
  async ("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function () {
    var $nav = document.querySelector("nav");
    if ($nav)
      FastClick.attach($nav);
    }
  )
</script>

<!-- Because of the native support for backtick-style fenced code blocks right within the Markdown is landed in Github Pages, From V1.6, There is no need for Highlight.js, so Huxblog drops it officially. -
https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0 - https://help.github.com/articles/creating-and-highlighting-code-blocks/ -->
<!-- <script> async ("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function () { hljs.initHighlightingOnLoad(); }) </script> <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet"> -->

<!-- jquery.tagcloud.js -->
<!-- <script> // only load tagcloud.js in tag.html if ($('#tag_cloud').length !== 0) { async ("http://yoursite-url/js/jquery.tagcloud.js", function () { $.fn.tagcloud.defaults = { // size: { start: 1, end: 1, unit: 'em' }, color: {
start: '#bbbbee', end: '#0085a1' } }; $('#tag_cloud a').tagcloud(); }) } </script> -->


		<!-- Search -->
		
		<div class="popup search-popup local-search-popup">
  <span class="popup-btn-close">
    ESC
  </span>
  <div class="container">
    <div class="row">
      <!-- <div class="col-md-9 col-md-offset-1"> -->
      <div class="col-lg-9 col-lg-offset-1 col-md-10 col-md-offset-1 local-search-content">

        <div class="local-search-header clearfix">

          <div class="local-search-input-wrapper">
            <span class="search-icon">
              <i class="fa fa-search fa-lg" style="margin: 25px 10px 25px 20px;"></i>
            </span>
            <input autocomplete="off" placeholder="SEARCH..." type="text" id="local-search-input">
          </div>
        </div>
        <div id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>


  
    <script src="/js/ziploader.js"></script>
  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.json";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    // monitor main search box;
    var onPopupClose = function (e) {
      $('.popup').fadeOut(300);
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $('.popup').fadeIn(300);
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }
    // get search zip version
    $.get('/searchVersion.json?t=' + (+new Date()), function (res) {
      if (localStorage.getItem('searchVersion') !== res) {
        localStorage.setItem('searchVersion', res);
        initSearchJson();
      }
    });

    function initSearchJson() {
      initLoad(['/search.flv'], {
        loadOptions: {
          success: function (obj) {
            localStorage.setItem('searchJson', obj['search.json'])
          },
          error: function (e) {
            return console.log(e)
          }
        },
        returnOptions: {
          'json': TYPE_TEXT
        },
        mimeOptions: {
          'json': 'application/json'
        }
      })
    }
    // search function;
    var searchFunc = function (search_id, content_id) {
      'use strict';
      isfetched = true;
      var datas = JSON.parse(localStorage.getItem('searchJson'));
      // console.log(search_id)
      var input = document.getElementById(search_id);
      var resultContent = document.getElementById(content_id);
      var inputEventFunction = function () {
        var searchText = input.value.trim().toLowerCase();
        var keywords = searchText.split(/[\s\-]+/);
        if (keywords.length > 1) {
          keywords.push(searchText);
        }
        var resultItems = [];
        if (searchText.length > 0) {
          // perform local searching
          datas.forEach(function (data) {
            var isMatch = false;
            var hitCount = 0;
            var searchTextCount = 0;
            var title = data.title
              ? data.title.trim()
              : '';
            var titleInLowerCase = title.toLowerCase();
            var content = data.content
              ? data.content.trim().replace(/<[^>]+>/g, "")
              : '';
            var contentInLowerCase = content.toLowerCase();
            var articleUrl = decodeURIComponent(data.url);

            var date = data.date;
            var dateTime = date.replace(/T/, " ").replace(/.000Z/, "");
            var imgUrl = data.header_img;
            


            var indexOfTitle = [];
            var indexOfContent = [];
            // only match articles with not empty titles
            keywords.forEach(function (keyword) {
              function getIndexByWord(word, text, caseSensitive) {
                var wordLen = word.length;
                if (wordLen === 0) {
                  return [];
                }
                var startPosition = 0,
                  position = [],
                  index = [];
                if (!caseSensitive) {
                  text = text.toLowerCase();
                  word = word.toLowerCase();
                }
                while ((position = text.indexOf(word, startPosition)) > -1) {
                  index.push({position: position, word: word});
                  startPosition = position + wordLen;
                }
                return index;
              }
              indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
              indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
            });
            if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
              isMatch = true;
              hitCount = indexOfTitle.length + indexOfContent.length;
            }
            // show search results
            if (isMatch) {
              // sort index by position of keyword
              [indexOfTitle, indexOfContent].forEach(function (index) {
                index.sort(function (itemLeft, itemRight) {
                  if (itemRight.position !== itemLeft.position) {
                    return itemRight.position - itemLeft.position;
                  } else {
                    return itemLeft.word.length - itemRight.word.length;
                  }
                });
              });
              // merge hits into slices
              function mergeIntoSlice(text, start, end, index) {
                var item = index[index.length - 1];
                var position = item.position;
                var word = item.word;
                var hits = [];
                var searchTextCountInSlice = 0;
                while (position + word.length <= end && index.length != 0) {
                  if (word === searchText) {
                    searchTextCountInSlice++;
                  }
                  hits.push({position: position, length: word.length});
                  var wordEnd = position + word.length;
                  // move to next position of hit
                  index.pop();
                  while (index.length != 0) {
                    item = index[index.length - 1];
                    position = item.position;
                    word = item.word;
                    if (wordEnd > position) {
                      index.pop();
                    } else {
                      break;
                    }
                  }
                }
                searchTextCount += searchTextCountInSlice;
                return {hits: hits, start: start, end: end, searchTextCount: searchTextCountInSlice};
              }
              var slicesOfTitle = [];
              if (indexOfTitle.length != 0) {
                slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
              }
              var slicesOfContent = [];
              while (indexOfContent.length != 0) {
                var item = indexOfContent[indexOfContent.length - 1];
                var position = item.position;
                var word = item.word;
                // cut out 100 characters
                var start = position - 20;
                var end = position + 80;
                if (start < 0) {
                  start = 0;
                }
                if (end < position + word.length) {
                  end = position + word.length;
                }
                if (end > content.length) {
                  end = content.length;
                }
                slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
              }
              // sort slices in content by search text's count and hits' count
              slicesOfContent.sort(function (sliceLeft, sliceRight) {
                if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                  return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                  return sliceRight.hits.length - sliceLeft.hits.length;
                } else {
                  return sliceLeft.start - sliceRight.start;
                }
              });
              // select top N slices in content
              var upperBound = parseInt('1');
              if (upperBound >= 0) {
                slicesOfContent = slicesOfContent.slice(0, upperBound);
              }
              // highlight title and content
              function highlightKeyword(text, slice) {
                var result = '';
                var prevEnd = slice.start;
                slice.hits.forEach(function (hit) {
                  result += text.substring(prevEnd, hit.position);
                  var end = hit.position + hit.length;
                  result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                  prevEnd = end;
                });
                result += text.substring(prevEnd, slice.end);
                return result;
              }
              var resultItem = '';

              // if (slicesOfTitle.length != 0) {   resultItem += "<li><a target='_blank' href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>"; } else {   resultItem += "<li><a target='_blank' href='" +
              // articleUrl + "' class='search-result-title'>" + title + "</a>"; } slicesOfContent.forEach(function (slice) {   resultItem += "<a target='_blank' href='" + articleUrl + "'><p class=\"search-result\">" + highlightKeyword(content, slice) +
              // "...</p></a>"; }); resultItem += "</li>";

              if (slicesOfTitle.length != 0) {
                resultItem += "<a target='_blank' href='" + articleUrl + "' class='search-result'><div class='search-result-left'><div class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</div><time class='search-result-date'>" + dateTime + "</time>";
              } else {
                resultItem += "<a target='_blank' href='" + articleUrl + "' class='search-result'><div class='search-result-left'><div class='search-result-title'>" + title + "</div><time class='search-result-date'>" + dateTime + "</time>";
              }
              slicesOfContent.forEach(function (slice) {
                resultItem += "<p class=\"search-result-content\">" + highlightKeyword(content, slice) + "...</p>";
              });
              resultItem += "</div><div class='search-result-right'><img class='media-image' src='" + imgUrl + "' width='64px' height='48px'></img></div></a>";

              resultItems.push({item: resultItem, searchTextCount: searchTextCount, hitCount: hitCount, id: resultItems.length});
            }
          })
        };

        if (keywords.length === 1 && keywords[0] === "") {
          resultContent.innerHTML = '<div id="no-result"></div>'
        } else if (resultItems.length === 0) {
          resultContent.innerHTML = '<div id="no-result"></div>'
        } else {
          resultItems.sort(function (resultLeft, resultRight) {
            if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
              return resultRight.searchTextCount - resultLeft.searchTextCount;
            } else if (resultLeft.hitCount !== resultRight.hitCount) {
              return resultRight.hitCount - resultLeft.hitCount;
            } else {
              return resultRight.id - resultLeft.id;
            }
          });
          var searchResultList = '<div class=\"search-result-list\">';
          resultItems.forEach(function (result) {
            searchResultList += result.item;
          })
          searchResultList += "</div>";
          resultContent.innerHTML = searchResultList;
        }
      }
      if ('auto' === 'auto') {
        input.addEventListener('input', inputEventFunction);
      } else {
        $('.search-icon').click(inputEventFunction);
        input.addEventListener('keypress', function (event) {
          if (event.keyCode === 13) {
            inputEventFunction();
          }
        });
      }
      // remove loading animation
      $('body').css('overflow', '');
      proceedsearch();
    }
    // handle and trigger popup window;
    $('.popup-trigger').click(function (e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc('local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });
    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function (e) {
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 && $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });

    document.addEventListener('mouseup', (e) => {
      var _con = document.querySelector(".local-search-content");
      if (_con) {
        if (!_con.contains(e.target)) {
          onPopupClose();
        }
      }
    });
  </script>


		
	<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>
</html>
